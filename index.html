<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Party Games">
    <title>Party Games - Impostor & Wer w√ºrde eher</title>
    
    <!-- PWA Icons -->
    <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==">
    <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==">
    <meta name="theme-color" content="#ff453a">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            margin: 0;
            padding: 0;
            overscroll-behavior: none;
            touch-action: manipulation;
            background: #000000;
            color: white;
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            transition: opacity 0.3s ease;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
            touch-action: pan-y;
        }
        
        .hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Background Gradients */
        .home-bg {
            background: #000000;
        }
        
        .impostor-bg {
            background: #ff453a;
        }

        .wer-wuerde-bg {
            background: #63e6e2;
        }
        
        /* Settings Icon */
        .settings-icon {
            position: fixed;
            bottom: clamp(25px, 6vw, 35px);
            left: clamp(20px, 5vw, 30px);
            background: rgba(28, 28, 30, 0.95);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: clamp(18px, 4.5vw, 22px);
            width: clamp(52px, 13vw, 60px);
            height: clamp(52px, 13vw, 60px);
            cursor: pointer;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .settings-icon:active {
            transform: scale(0.92);
            background: rgba(28, 28, 30, 0.9);
            box-shadow: 0 4px 16px rgba(0,0,0,0.4);
        }
        
        .settings-icon:hover {
            background: rgba(48, 48, 52, 0.95);
            transform: scale(1.05);
        }
        
        .settings-icon::before {
            content: '';
            width: 20px;
            height: 20px;
            background: currentColor;
            mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z'/%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'/%3E%3C/svg%3E") no-repeat center;
            mask-size: contain;
            -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z'/%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'/%3E%3C/svg%3E") no-repeat center;
            -webkit-mask-size: contain;
        }
        
        /* Info Icon */
        .info-icon {
            position: fixed;
            bottom: clamp(25px, 6vw, 35px);
            right: clamp(20px, 5vw, 30px);
            background: rgba(28, 28, 30, 0.95);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: clamp(18px, 4.5vw, 22px);
            width: clamp(52px, 13vw, 60px);
            height: clamp(52px, 13vw, 60px);
            cursor: pointer;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .info-icon:active {
            transform: scale(0.92);
            background: rgba(28, 28, 30, 0.9);
            box-shadow: 0 4px 16px rgba(0,0,0,0.4);
        }
        
        .info-icon:hover {
            background: rgba(48, 48, 52, 0.95);
            transform: scale(1.05);
        }
        
        .info-icon::before {
            content: '';
            width: 20px;
            height: 20px;
            background: currentColor;
            mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'/%3E%3C/svg%3E") no-repeat center;
            mask-size: contain;
            -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'/%3E%3C/svg%3E") no-repeat center;
            -webkit-mask-size: contain;
        }
        
        /* Settings Menu */
        .settings-menu {
            position: fixed;
            bottom: clamp(90px, 20vw, 110px);
            left: clamp(20px, 5vw, 30px);
            background: rgba(28, 28, 30, 0.95);
            border-radius: 24px;
            padding: 8px;
            min-width: 220px;
            max-width: 280px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.25);
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            z-index: 999;
            opacity: 0;
            transform: translateY(10px) scale(0.95);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: none;
        }
        
        .settings-menu.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }
        
        .settings-menu-item {
            padding: 16px 20px;
            color: white;
            cursor: pointer;
            border-radius: 16px;
            margin-bottom: 4px;
            font-size: clamp(15px, 3.5vw, 17px);
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .settings-menu-item:hover, .settings-menu-item:active {
            background: rgba(255,255,255,0.15);
            transform: scale(0.98);
        }
        
        .settings-menu-item.version {
            color: rgba(255,255,255,0.4);
            cursor: default;
            pointer-events: none;
        }
        
        .settings-menu-item.version:hover, .settings-menu-item.version:active {
            background: transparent;
            transform: none;
        }
        
        .settings-menu-item:last-child {
            margin-bottom: 0;
        }
        
        /* Header Container */
        .header-container {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            width: 100%;
            height: clamp(80px, 15vh, 100px);
            margin-bottom: 10px;
            margin-top: 30px;
        }
        
        /* Typography */
        .title {
            font-size: clamp(38px, 11vw, 64px);
            font-weight: 800;
            color: white;
            text-align: center;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
            line-height: 1;
            z-index: 2;
            position: relative;
        }
        
        .title-suffix {
            font-size: clamp(16px, 4.5vw, 26px);
            color: rgba(255,255,255,0.6);
            font-weight: 400;
            margin-left: 8px;
        }
        
        /* Controller Emoji */
        .controller-emoji {
            font-size: clamp(35px, 9vw, 60px);
            position: absolute;
            left: clamp(-5px, 2vw, 15px);
            top: clamp(-20px, -4vw, -12px);
            transform: rotate(-15deg);
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
            opacity: 0.85;
            z-index: 3;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { 
                transform: rotate(-15deg) translateY(0px); 
            }
            50% { 
                transform: rotate(-15deg) translateY(-8px); 
            }
        }
        
        /* Game Cards Container */
        .games-container {
            display: flex;
            gap: 20px;
            width: 100%;
            max-width: 100vw;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 0 20px;
            margin-bottom: 20px;
        }
        
        .games-container::-webkit-scrollbar {
            display: none;
        }
        
        /* Screen Transition */
        .screen-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .screen-transition.active {
            opacity: 1;
            pointer-events: auto;
        }

        .screen-transition.impostor {
            background: #ff453a;
        }

        .screen-transition.wer-wuerde {
            background: #63e6e2;
        }

        /* Game Cards */
        .game-card {
            min-width: calc(100vw - 60px);
            max-width: calc(100vw - 60px);
            height: clamp(360px, 55vh, 450px);
            border-radius: 32px;
            padding: 28px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            scroll-snap-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .game-card:active {
            transform: scale(0.96);
        }
        
        .impostor-card {
            background: #ff453a;
            color: white;
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .impostor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(0,0,0,0.1) 100%);
            pointer-events: none;
            border-radius: 32px;
        }
        
        .wer-wuerde-card {
            background: #63e6e2;
            color: white;
            border: 2px solid rgba(255,255,255,0.2);
        }
        
        .wer-wuerde-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(0,0,0,0.1) 100%);
            pointer-events: none;
            border-radius: 32px;
        }
        
        .coming-soon-card {
            background: rgba(28, 28, 30, 0.95);
            color: white;
            opacity: 0.7;
            border: 2px solid rgba(255,255,255,0.15);
        }
        
        .game-card-emoji {
            font-size: clamp(60px, 15vw, 75px);
            margin-bottom: 20px;
            filter: drop-shadow(0 4px 12px rgba(0,0,0,0.3));
            background: rgba(255,255,255,0.15);
            width: clamp(100px, 22vw, 120px);
            height: clamp(100px, 22vw, 120px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .game-card-title {
            font-size: clamp(20px, 5vw, 25px);
            font-weight: 700;
            margin-bottom: 14px;
            text-align: center;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            letter-spacing: -0.5px;
            line-height: 1.1;
        }
        
        .game-card-desc {
            font-size: clamp(14px, 3.5vw, 17px);
            text-align: center;
            opacity: 0.9;
            margin-bottom: 24px;
            line-height: 1.5;
            font-weight: 400;
        }
        
        .game-card-players {
            background: rgba(0,0,0,0.25);
            border-radius: 20px;
            padding: 10px 16px;
            font-size: clamp(12px, 3vw, 14px);
            font-weight: 600;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        /* Snap Indicators */
        .snap-indicators {
            display: flex;
            gap: 12px;
            margin-top: 15px;
            justify-content: center;
        }
        
        .snap-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.4);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
        }
        
        .snap-dot.active {
            background: white;
            transform: scale(1.3);
            box-shadow: 0 4px 12px rgba(255,255,255,0.4);
        }
        
        .snap-dot:hover {
            background: rgba(255,255,255,0.7);
            transform: scale(1.1);
        }

        /* Back Button */
        .back-button {
            position: absolute;
            top: clamp(20px, 5vw, 30px);
            left: clamp(20px, 5vw, 30px);
            background: rgba(28, 28, 30, 0.95);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: clamp(18px, 4.5vw, 22px);
            width: clamp(48px, 12vw, 56px);
            height: clamp(48px, 12vw, 56px);
            cursor: pointer;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .back-button:active {
            transform: scale(0.9);
            background: rgba(48, 48, 52, 0.95);
        }

        /* Settings Container */
        .settings-container {
            background: rgba(28, 28, 30, 0.95);
            border-radius: 28px;
            padding: clamp(28px, 6vw, 36px);
            margin: 20px 0;
            width: 100%;
            max-width: min(440px, 90vw);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 16px 40px rgba(0,0,0,0.1);
        }
        
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: clamp(20px, 5vw, 28px) 0;
            color: white;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .setting-label {
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 600;
            display: flex;
            align-items: center;
            flex: 1;
            min-width: 140px;
        }
        
        .setting-icon {
            font-size: clamp(22px, 5.5vw, 26px);
            margin-right: 16px;
            width: 32px;
            text-align: center;
        }
        
        /* Players controls with names button */
        .players-controls {
            display: flex;
            align-items: center;
            gap: clamp(8px, 2vw, 12px);
        }
        
        .names-button {
            background: rgba(44, 44, 48, 0.95);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: clamp(14px, 3.5vw, 16px);
            padding: clamp(8px, 2vw, 10px);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: clamp(36px, 9vw, 40px);
            height: clamp(36px, 9vw, 40px);
            border: 1px solid rgba(255,255,255,0.15);
        }
        
        .names-button:active {
            background: rgba(58, 58, 64, 0.95);
            transform: scale(0.95);
        }

        /* Categories button */
        .categories-button {
            background: rgba(44, 44, 48, 0.95);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: clamp(14px, 3.5vw, 16px);
            padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 20px);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: 1px solid rgba(255,255,255,0.15);
            min-width: clamp(100px, 25vw, 120px);
        }
        
        .categories-button:active {
            background: rgba(58, 58, 64, 0.95);
            transform: scale(0.95);
        }
        
        /* Counter Controls */
        .counter-controls {
            display: flex;
            align-items: center;
            gap: clamp(14px, 3.5vw, 20px);
        }
        
        .counter-btn {
            width: clamp(42px, 10vw, 48px);
            height: clamp(42px, 10vw, 48px);
            border-radius: 50%;
            background: rgba(44, 44, 48, 0.95);
            border: none;
            color: white;
            font-size: clamp(20px, 5vw, 24px);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.15);
        }
        
        .counter-btn:active {
            transform: scale(0.9);
            background: rgba(58, 58, 64, 0.95);
        }
        
        .counter-value {
            font-size: clamp(18px, 4.5vw, 22px);
            font-weight: 700;
            min-width: clamp(32px, 8vw, 38px);
            text-align: center;
        }
        
        /* Toggle Switch */
        .toggle-switch {
            width: clamp(56px, 14vw, 62px);
            height: clamp(32px, 8vw, 36px);
            background: rgba(44, 44, 48, 0.95);
            border-radius: 18px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.15);
        }
        
        .toggle-switch.active {
            background: #4CAF50;
            border: 1px solid rgba(76, 175, 80, 0.4);
        }
        
        .toggle-switch::after {
            content: '';
            position: absolute;
            width: clamp(28px, 7vw, 32px);
            height: clamp(28px, 7vw, 32px);
            border-radius: 50%;
            background: white;
            top: 50%;
            left: 2px;
            transform: translateY(-50%);
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .toggle-switch.active::after {
            left: calc(100% - clamp(28px, 7vw, 32px) - 2px);
        }
        
        /* Buttons */
        .button {
            background: rgba(44, 44, 48, 0.95) !important;
            border: none;
            border-radius: 24px;
            color: white !important;
            font-size: clamp(16px, 4.2vw, 20px);
            font-weight: 700;
            padding: clamp(18px, 4.5vw, 24px) clamp(32px, 8vw, 42px);
            margin: 10px;
            min-width: clamp(240px, 65vw, 320px);
            max-width: 90vw;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            text-decoration: none;
            display: block;
            outline: none;
            -webkit-appearance: none;
            user-select: none;
            -webkit-user-select: none;
            position: relative;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            z-index: 50;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.15) !important;
        }
        
        .button:active, .button:hover {
            transform: scale(0.96);
            background: rgba(58, 58, 64, 0.95) !important;
            box-shadow: 0 12px 32px rgba(0,0,0,0.4);
        }

        /* Wer W√ºrde Eher Question Card */
        .question-card {
            background: rgba(255,255,255,0.95);
            border-radius: 32px;
            padding: clamp(32px, 8vw, 48px);
            margin: 20px 0;
            backdrop-filter: blur(20px);
            box-shadow: 0 32px 80px rgba(0,0,0,0.15);
            position: relative;
            width: 92%;
            max-width: 480px;
            text-align: center;
        }

        .question-title {
            font-size: clamp(24px, 6vw, 32px);
            font-weight: 800;
            color: #333;
            margin-bottom: 24px;
            line-height: 1.2;
        }

        .question-divider {
            width: 100%;
            height: 2px;
            background: #63e6e2;
            margin: 20px 0;
            border-radius: 1px;
        }

        .question-text {
            font-size: clamp(18px, 4.5vw, 24px);
            color: #333;
            line-height: 1.4;
            margin: 24px 0;
            min-height: clamp(80px, 12vh, 120px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
        }

        /* Categories Modal */
        .categories-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .categories-modal.visible {
            opacity: 1;
            pointer-events: auto;
        }
        
        .categories-modal-content {
            background: rgba(28, 28, 30, 0.95);
            border-radius: 32px;
            padding: 32px;
            width: 92%;
            max-width: 480px;
            max-height: 85vh;
            overflow-y: auto;
            color: white;
            position: relative;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 32px 80px rgba(0,0,0,0.25);
            transform: scale(0.9) translateY(20px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        
        .categories-modal.visible .categories-modal-content {
            transform: scale(1) translateY(0);
        }
        
        .categories-modal-close {
            position: absolute;
            top: 20px;
            right: 24px;
            background: rgba(255,255,255,0.15);
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .categories-modal-close:hover, .categories-modal-close:active {
            background: rgba(255,255,255,0.25);
            transform: scale(0.9);
        }
        
        .categories-modal-title {
            font-size: clamp(26px, 6.5vw, 34px);
            font-weight: 700;
            margin-bottom: 24px;
            text-align: center;
            color: white;
        }
        
        .categories-list {
            max-height: 60vh;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .category-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255,255,255,0.15);
            border-radius: 16px;
            padding: 16px 20px;
            margin-bottom: 12px;
            color: white;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .category-item:hover, .category-item:active {
            background: rgba(255,255,255,0.2);
            transform: scale(0.98);
        }
        
        .category-item.selected {
            background: rgba(76, 175, 80, 0.3);
            border-color: rgba(76, 175, 80, 0.5);
        }
        
        .category-display {
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 600;
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .category-emoji {
            font-size: clamp(20px, 5vw, 24px);
        }
        
        .category-count {
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 8px 12px;
            font-size: clamp(12px, 3vw, 14px);
            font-weight: 600;
            color: rgba(255,255,255,0.8);
        }

        /* Responsive Design */
        @media screen and (max-height: 600px) {
            .screen {
                padding: 12px;
                justify-content: flex-start;
                padding-top: 20px;
            }
            
            .title {
                font-size: clamp(22px, 6vw, 32px);
                margin-bottom: 12px;
            }
            
            .settings-container {
                margin: 10px 0;
                padding: 16px;
            }
            
            .setting-row {
                margin: clamp(16px, 4vw, 20px) 0;
            }
        }
        
        @media screen and (max-width: 320px) {
            .setting-row {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }
            
            .counter-controls {
                justify-content: center;
            }
            
            .button {
                min-width: 85%;
                margin: 8px auto;
            }
            
            .games-container {
                gap: 12px;
                padding: 0 12px;
            }
            
            .game-card {
                min-width: calc(100vw - 32px);
                max-width: calc(100vw - 32px);
            }
        }
    </style>
</head>
<body>
    <!-- Settings Icon -->
    <button class="settings-icon" id="settingsIcon" onclick="toggleSettingsMenu()"></button>
    
    <!-- Info Icon -->
    <button class="info-icon" id="infoIcon" onclick="showInfoModal()"></button>
    
    <!-- Settings Menu -->
    <div class="settings-menu" id="settingsMenu">
        <div class="settings-menu-item" onclick="showStatsModal()">
            üìä Statistiken
        </div>
        <div class="settings-menu-item" onclick="showHistoryModal()">
            üìö Spiel-Historie
        </div>
        <div class="settings-menu-item" onclick="showAchievementsModal()">
            üèÜ Erfolge
        </div>
        <div class="settings-menu-item" onclick="showInstallModal()">
            üì± App installieren
        </div>
        <div class="settings-menu-item" onclick="toggleTheme()">
            üåô Theme: <span id="themeStatus">Dark</span>
        </div>
        <div class="settings-menu-item" onclick="toggleSounds()">
            üîä Sounds: <span id="soundStatus">An</span>
        </div>
        <div class="settings-menu-item" onclick="toggleVibration()">
            üì≥ Vibration: <span id="vibrationStatus">An</span>
        </div>
        <div class="settings-menu-item" onclick="showComingSoonModal()">
            üöÄ Coming Soon
        </div>
        <div class="settings-menu-item version">
            üíª made by C at School
        </div>
    </div>

    <!-- Clean Screen Transition -->
    <div class="screen-transition" id="screenTransition"></div>

    <!-- Mode Select Screen -->
    <div id="modeSelectScreen" class="screen home-bg">
        <div class="header-container">
            <h1 class="title">Party-games<span class="title-suffix">.me</span></h1>
            <div class="controller-emoji">üéÆ</div>
        </div>
        
        <div class="games-container" id="gamesContainer">
            <div class="game-card impostor-card" onclick="showImpostorSettings()">
                <div class="game-card-emoji">üé≠</div>
                <div class="game-card-title">
                    <div style="font-size: clamp(14px, 3.5vw, 18px); font-weight: 600; margin-bottom: 4px;">FINDET DEN</div>
                    <div style="font-size: clamp(28px, 7vw, 36px); font-weight: 800;">IMPOSTOR</div>
                </div>
                <div class="game-card-desc">Finde heraus, wer der Verr√§ter in eurer Gruppe ist!</div>
                <div class="game-card-players">üë• 3-20</div>
            </div>
            
            <div class="game-card wer-wuerde-card" onclick="showWerWuerdeSettings()">
                <div class="game-card-emoji">üß†</div>
                <div class="game-card-title">
                    <div style="font-size: clamp(14px, 3.5vw, 18px); font-weight: 600; margin-bottom: 4px;">WER W√úRDE</div>
                    <div style="font-size: clamp(28px, 7vw, 36px); font-weight: 800;">EHER...?</div>
                </div>
                <div class="game-card-desc">Lustige Fragen √ºber eure Freunde - wer w√ºrde was eher machen?</div>
                <div class="game-card-players">üë• 2-99</div>
            </div>
            
            <div class="game-card coming-soon-card" onclick="handleEasterEggClick()">
                <div class="game-card-emoji">üéØ</div>
                <div class="game-card-title">MEHR SPIELE</div>
                <div class="game-card-desc">Weitere Party-Spiele kommen bald!</div>
                <div class="game-card-players">Bald verf√ºgbar</div>
            </div>
        </div>
        
        <!-- Snap Indicators -->
        <div class="snap-indicators">
            <div class="snap-dot active" id="dot1" onclick="scrollToCard(0)"></div>
            <div class="snap-dot" id="dot2" onclick="scrollToCard(1)"></div>
            <div class="snap-dot" id="dot3" onclick="scrollToCard(2)"></div>
        </div>
    </div>

    <!-- Impostor Settings Screen -->
    <div id="impostorScreen" class="screen impostor-bg hidden">
        <button class="back-button" onclick="showModeSelect()">‚Üê</button>
        
        <h1 class="title" style="font-size: clamp(28px, 7vw, 36px); margin-bottom: 28px;">Impostor Game</h1>
        
        <div class="settings-container">
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">üë•</span>
                    Spieler
                </div>
                <div class="players-controls">
                    <div class="counter-controls">
                        <button class="counter-btn" onclick="changePlayerCount(-1)">‚àí</button>
                        <span class="counter-value" id="playersCount">4</span>
                        <button class="counter-btn" onclick="changePlayerCount(1)">+</button>
                    </div>
                    <button class="names-button" onclick="showNamesModal()" title="Namen bearbeiten">
                        ‚úèÔ∏è
                    </button>
                </div>
            </div>
            
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">üé≠</span>
                    Impostor
                </div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="changeImpostorCount(-1)">‚àí</button>
                    <span class="counter-value" id="impostorsCount">1</span>
                    <button class="counter-btn" onclick="changeImpostorCount(1)">+</button>
                </div>
            </div>
            
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">‚è±Ô∏è</span>
                    Zeitlimit
                </div>
                <div class="toggle-switch" id="timerToggle" onclick="toggleTimer()"></div>
            </div>
            
            <div class="setting-row" id="timerMinutesRow" style="display: none;">
                <div class="setting-label">
                    <span class="setting-icon">üïê</span>
                    Minuten
                </div>
                <div class="counter-controls">
                    <button class="counter-btn" onclick="changeTimerMinutes(-1)">‚àí</button>
                    <span class="counter-value" id="timerMinutesCount">2</span>
                    <button class="counter-btn" onclick="changeTimerMinutes(1)">+</button>
                </div>
            </div>
            
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">üè∑Ô∏è</span>
                    Kategorien
                </div>
                <button class="categories-button" id="categoryButton" onclick="showCategoriesModal()">
                    <span id="categoryEmoji">üéØ</span>
                    <span id="categoryText">Alle</span>
                </button>
            </div>
            
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">üí°</span>
                    Hinweise f√ºr Impostor
                </div>
                <div class="toggle-switch active" id="hintsToggle" onclick="toggleHints()"></div>
            </div>
        </div>
        
        <button class="button" onclick="startGame()">
            Spiel starten
        </button>
    </div>

    <!-- Wer W√ºrde Eher Settings Screen -->
    <div id="werWuerdeScreen" class="screen wer-wuerde-bg hidden">
        <button class="back-button" onclick="showModeSelect()">‚Üê</button>
        
        <h1 class="title" style="font-size: clamp(28px, 7vw, 36px); margin-bottom: 28px;">Wer w√ºrde eher...?</h1>
        
        <div class="settings-container">
            <div class="setting-row">
                <div class="setting-label">
                    <span class="setting-icon">üè∑Ô∏è</span>
                    Kategorien
                </div>
                <button class="categories-button" id="werWuerdeCategoryButton" onclick="showWerWuerdeCategoriesModal()">
                    <span id="werWuerdeCategoryEmoji">üß†</span>
                    <span id="werWuerdeCategoryText">Klassisch</span>
                </button>
            </div>
        </div>
        
        <button class="button" onclick="startWerWuerdeGame()">
            Spiel starten
        </button>
    </div>

    <!-- Wer W√ºrde Eher New Game Screen -->
    <div id="werWuerdeNewGameScreen" class="screen wer-wuerde-bg hidden">
        <button class="back-button" onclick="showWerWuerdeSettings()">‚Üê</button>
        
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; display: flex; justify-content: center;">
            <div class="question-card" style="cursor: pointer; transition: all 0.3s ease;" onclick="revealWerWuerdeQuestion()" onmousedown="this.style.transform='scale(0.98)'" onmouseup="this.style.transform='scale(1)'" onmouseleave="this.style.transform='scale(1)'">
                <div style="font-size: clamp(20px, 5vw, 24px); margin-bottom: 16px;">üß†</div>
                
                <div class="question-title">
                    NEUES SPIEL
                </div>
                
                <div class="question-divider"></div>
                
                <div class="question-text" style="font-size: clamp(24px, 6vw, 32px); font-weight: 700; color: #63e6e2;">
                    ANTIPPEN ZUM<br>AUFDECKEN
                </div>
                
                <div style="color: rgba(51, 51, 51, 0.5); font-size: clamp(12px, 3vw, 14px); margin: 16px 0; font-weight: 400;">
                    üí° Bereit f√ºr eine neue Frage?
                </div>
            </div>
        </div>
    </div>

    <!-- Wer W√ºrde Eher Game Screen -->
    <div id="werWuerdeGameScreen" class="screen wer-wuerde-bg hidden">
        <button class="back-button" onclick="showWerWuerdeNewGameScreen()">‚Üê</button>
        
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; display: flex; justify-content: center;">
            <div class="question-card">
                <div style="font-size: clamp(20px, 5vw, 24px); margin-bottom: 16px;">üß†</div>
                
                <div class="question-title">
                    WER W√úRDE<br>EHER...?
                </div>
                
                <div class="question-divider"></div>
                
                <div class="question-text" id="werWuerdeQuestion">
                    den ganzen Tag im Schlafanzug bleiben?
                </div>
                
                <div style="color: rgba(51, 51, 51, 0.5); font-size: clamp(12px, 3vw, 14px); margin: 16px 0; font-weight: 400;">
                    üí° Diskutiert und stimmt ab!
                </div>
                
                <button class="button" onclick="nextWerWuerdeQuestion()" style="background: #63e6e2 !important; margin: 20px 0 0 0; width: 100%;">
                    N√§chste Frage
                </button>
            </div>
        </div>
    </div>

    <!-- Impostor New Game Screen -->
    <div id="impostorNewGameScreen" class="screen impostor-bg hidden">
        <button class="back-button" onclick="showImpostorSettings()">‚Üê</button>
        
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; display: flex; justify-content: center;">
            <div class="player-card" style="cursor: pointer; background: linear-gradient(135deg, #ff6b6b 0%, #ff453a 100%); transition: all 0.3s ease;" onclick="revealImpostorGame()" onmousedown="this.style.transform='scale(0.98)'" onmouseup="this.style.transform='scale(1)'" onmouseleave="this.style.transform='scale(1)'">
                <div style="font-size: clamp(20px, 5vw, 24px); margin-bottom: 16px;">üé≠</div>
                
                <div class="player-title" style="font-size: clamp(28px, 7vw, 36px); font-weight: 800;">
                    NEUES SPIEL
                </div>
                
                <div style="width: 100%; height: 2px; background: rgba(255,255,255,0.3); margin: 20px 0; border-radius: 1px;"></div>
                
                <div style="font-size: clamp(24px, 6vw, 32px); font-weight: 700; color: white; margin: 24px 0; min-height: clamp(80px, 12vh, 120px); display: flex; align-items: center; justify-content: center;">
                    ANTIPPEN ZUM<br>AUFDECKEN
                </div>
                
                <div style="color: rgba(255,255,255,0.7); font-size: clamp(12px, 3vw, 14px); margin: 16px 0; font-weight: 400;">
                    üí° Bereit f√ºr ein neues Impostor Game?
                </div>
            </div>
        </div>
    </div>

    <!-- Game Playing Screen -->
    <div id="gameScreen" class="screen impostor-bg hidden">
        <button class="back-button" onclick="showScreen('impostorNewGameScreen')">‚Üê</button>
        
        <h2 style="color: white; font-size: clamp(14px, 3.5vw, 18px); margin-bottom: 0; font-weight: 600; position: absolute; top: clamp(20px, 5vw, 30px); left: 50%; transform: translateX(-50%); z-index: 10;">Impostor Game</h2>
        
        <div class="player-card" id="playerCard" style="background: linear-gradient(135deg, #ffb347 0%, #ff8c42 100%); border-radius: 28px; padding: clamp(28px, 7vw, 36px); margin: 20px 0; width: 100%; max-width: min(400px, 90vw); text-align: center; box-shadow: 0 16px 40px rgba(0,0,0,0.2); border: 3px solid rgba(255,255,255,0.3); transition: all 0.4s ease; position: relative; z-index: 10000;">
            <div class="player-title" id="playerTitle" style="font-size: clamp(24px, 6vw, 32px); font-weight: 700; color: white; margin-bottom: 20px; text-shadow: 0 2px 8px rgba(0,0,0,0.3);">Spieler 1</div>
            <div class="player-emoji" id="playerEmoji" style="font-size: clamp(56px, 14vw, 72px); margin: 20px 0; background: rgba(255,255,255,0.3); width: clamp(80px, 20vw, 100px); height: clamp(80px, 20vw, 100px); border-radius: 28px; display: flex; align-items: center; justify-content: center; margin: 20px auto; backdrop-filter: blur(10px);">üë§</div>
            
            <button class="reveal-button" style="background: rgba(255,255,255,0.25); border-radius: 20px; color: white; font-size: clamp(16px, 4vw, 18px); font-weight: 600; padding: clamp(16px, 4vw, 20px) clamp(20px, 5vw, 24px); width: 100%; cursor: pointer; transition: all 0.3s ease; border: none; outline: none; backdrop-filter: blur(10px);"
                    onmousedown="showRole()" onmouseup="hideRole()" onmouseleave="hideRole()"
                    ontouchstart="showRole()" ontouchend="hideRole()">
                <div style="margin-bottom: 8px;">‚Üë</div>
                Karte aufdecken
            </button>
            
            <div class="revealed-content" id="revealedContent" style="position: absolute; top: 100%; left: 0; right: 0; background: rgba(0,0,0,0.95); border-radius: 28px; padding: clamp(24px, 6vw, 32px); margin-top: 20px; text-align: center; opacity: 0; transform: translateY(10px); transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); z-index: 999999; pointer-events: none; backdrop-filter: blur(20px); max-width: 100%; box-sizing: border-box; min-height: clamp(140px, 20vh, 180px);">
                <div class="role-icon" id="roleIcon" style="width: clamp(52px, 13vw, 60px); height: clamp(52px, 13vw, 60px); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; font-size: clamp(22px, 6vw, 28px); font-weight: bold; color: white;">‚úì</div>
                <div class="role-text" id="roleText" style="font-size: clamp(18px, 4.5vw, 22px); font-weight: 600; color: white; margin-bottom: 16px;"></div>
                <div id="wordOrHint"></div>
            </div>
        </div>
        
        <div style="height: clamp(100px, 16vh, 140px);"></div>
        
        <button class="button" onclick="handleNextPlayer()" id="nextButton" style="opacity: 0 !important; pointer-events: none !important; transform: translateY(20px); transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); position: fixed !important; bottom: clamp(80px, 14vh, 120px) !important; left: 50% !important; transform: translateX(-50%) translateY(20px) !important; z-index: 500 !important; min-height: clamp(54px, 12vh, 64px) !important;">
            Weitergeben
        </button>
        
        <p id="instructionText" style="color: rgba(255,255,255,0.8); font-size: clamp(14px, 3.5vw, 16px); text-align: center; margin-top: 14px; transition: all 0.3s ease; opacity: 1; visibility: visible; position: fixed; bottom: clamp(30px, 8vh, 50px); left: 50%; transform: translateX(-50%); max-width: 90%; line-height: 1.4;">
            Ziehe deine Karte nach oben, um das Wort zu sehen. Achte darauf, dass niemand es sieht.
        </p>
    </div>

    <!-- Game Started Screen -->
    <div id="gameStartedScreen" class="screen impostor-bg hidden">
        <button class="back-button" onclick="showImpostorSettings()">‚Üê</button>
        
        <div id="timerDisplay" style="position: absolute; top: clamp(20px, 5vw, 30px); left: 50%; transform: translateX(-50%); background: rgba(28, 28, 30, 0.95); border-radius: 24px; padding: clamp(12px, 3vw, 14px) clamp(20px, 5vw, 24px); color: white; font-size: clamp(18px, 4.5vw, 22px); font-weight: 700; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2);" class="hidden">5:00</div>
        
        <div style="text-align: center;">
            <div style="font-size: clamp(80px, 20vw, 100px); margin-bottom: 28px;">üé≠</div>
            <h1 class="title" style="font-size: clamp(32px, 8vw, 40px); margin-bottom: 20px;">Spiel l√§uft!</h1>
            <div class="starter-text" id="starterText" style="font-size: clamp(28px, 7vw, 36px); font-weight: 700; color: white; text-align: center; margin: 28px 0; animation: pulse 2s infinite;">Spieler 1 beginnt</div>
        </div>
        
        <div class="goal-box" style="background: rgba(28, 28, 30, 0.95); border-radius: 24px; padding: clamp(20px, 5vw, 24px); margin: 20px 0; width: 100%; max-width: min(400px, 90vw); text-align: left; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2);">
            <div class="goal-title" style="font-size: clamp(22px, 5.5vw, 26px); font-weight: 700; color: white; margin-bottom: 20px; text-align: center;">Ziel:</div>
            <div class="goal-item" style="margin-bottom: 16px; color: white; line-height: 1.5; font-size: clamp(16px, 4vw, 18px);">
                <span style="font-size: clamp(22px, 5.5vw, 26px); margin-right: 14px;">üë•</span>
                <strong>Normale Spieler:</strong><br>Findet den Impostor!
            </div>
            <div class="goal-item" style="margin-bottom: 16px; color: white; line-height: 1.5; font-size: clamp(16px, 4vw, 18px);">
                <span style="font-size: clamp(22px, 5.5vw, 26px); margin-right: 14px;">üé≠</span>
                <strong>Impostor:</strong><br>Erratet das Wort!
            </div>
        </div>
        
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 14px; margin-top: 28px;">
            <button class="button" onclick="showRoles()">
                Rollen aufdecken
            </button>
            <button class="button" onclick="startGame()">
                Neues Spiel
            </button>
        </div>
    </div>

    <!-- End Screen -->
    <div id="endScreen" class="screen impostor-bg hidden">
        <button class="back-button" onclick="showGameStarted()">‚Üê</button>
        
        <h1 class="title" style="font-size: clamp(24px, 6vw, 32px); margin-bottom: 28px;">Rollen aufdecken</h1>
        
        <div class="roles-list" id="rolesList" style="width: 100%; max-width: min(440px, 90vw); margin: 20px 0; max-height: 65vh; overflow-y: auto;">
            <!-- Dynamically populated -->
        </div>
        
        <button class="button" onclick="startGame()">
            Neues Spiel
        </button>
    </div>

    <!-- Names Management Modal -->
    <div class="categories-modal" id="namesModal">
        <div class="categories-modal-content">
            <button class="categories-modal-close" onclick="closeNamesModal()">√ó</button>
            <h2 class="categories-modal-title">Spieler Namen</h2>
            <div class="categories-list" id="namesList" style="max-height: 60vh; overflow-y: auto; margin-bottom: 20px;">
                <!-- Dynamically populated -->
            </div>
        </div>
    </div>

    <!-- Categories Management Modal -->
    <div class="categories-modal" id="categoriesModal">
        <div class="categories-modal-content">
            <button class="categories-modal-close" onclick="closeCategoriesModal()">√ó</button>
            <h2 class="categories-modal-title">Kategorien ausw√§hlen</h2>
            <div class="categories-list" id="categoriesList">
                <!-- Dynamically populated -->
            </div>
        </div>
    </div>

    <!-- Wer W√ºrde Eher Categories Modal -->
    <div class="categories-modal" id="werWuerdeCategoriesModal">
        <div class="categories-modal-content">
            <button class="categories-modal-close" onclick="closeWerWuerdeCategoriesModal()">√ó</button>
            <h2 class="categories-modal-title">Kategorien ausw√§hlen</h2>
            <div class="categories-list" id="werWuerdeCategoriesList">
                <!-- Dynamically populated -->
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div id="confetti" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10000; overflow: hidden;"></div>

    <script>
        // App Version
        const APP_VERSION = '1.4.0';

        // Game State f√ºr Impostor
        let gameState = {
            totalPlayers: 4,
            impostors: 1,
            timerEnabled: false,
            timerMinutes: 2,
            hintsEnabled: true,
            selectedCategories: ['alle'],
            currentPlayer: 1,
            gameWord: '',
            gameHint: '',
            impostorPlayers: [],
            playerEmojis: [],
            playerNames: [],
            startingPlayer: null,
            timer: null,
            timeLeft: 0,
            gameStartTime: null,
            roundDuration: 0,
            hasRevealed: false
        };

        // Game State f√ºr Wer W√ºrde Eher
        let werWuerdeState = {
            selectedCategories: ['klassisch'],
            usedQuestions: []
        };

        // Settings
        let settings = {
            soundsEnabled: true,
            vibrationEnabled: true,
            lightTheme: false
        };

        // Stats and Achievements
        let playerStats = {
            gamesPlayed: 0,
            fastestGame: null,
            longestGame: null,
            totalPlayTime: 0
        };
        
        let gameHistory = [];
        let achievements = {};

        // Easter Egg Variables
        let easterEggClicks = 0;
        let easterEggTimer = null;

        // Wer W√ºrde Eher Questions by category
        const WER_WUERDE_QUESTIONS = {
            klassisch: [
                "den ganzen Tag im Schlafanzug bleiben?",
                "beim ersten Date zu sp√§t kommen?",
                "in der √ñffentlichkeit stolpern?",
                "ein Geheimnis nicht f√ºr sich behalten k√∂nnen?",
                "beim Karaoke das Mikrofon nicht mehr loslassen?",
                "sich in einem Kaufhaus verlaufen?",
                "beim Kochen das Essen anbrennen lassen?",
                "im Kino laut √ºber den Film sprechen?",
                "beim Sport als erstes aufgeben?",
                "beim Tanzen alle Blicke auf sich ziehen?",
                "beim Fotografieren die schlechtesten Bilder machen?",
                "in einem wichtigen Meeting einschlafen?",
                "beim Autofahren sich mehrmals verfahren?",
                "beim Spieleabend zu ehrgeizig werden?",
                "beim Shopping das Budget komplett sprengen?",
                "bei einer Party als erstes nach Hause gehen?",
                "beim Grillen das Fleisch verkohlen?",
                "beim Smalltalk in peinliche Stille verfallen?",
                "beim Putzen mehr Chaos anrichten?",
                "curt aus Kurdistan den Computer klauen",
                "beim Streaming die ganze Nacht durchmachen?"
            ],
            
            party: [
                "bei einer Party auf dem Tisch tanzen?",
                "Karaoke singen und dabei v√∂llig schief sein?",
                "bei einem Trinkspiel als erstes ausscheiden?",
                "bei einer Party in der K√ºche enden?",
                "beim Tanzen alle anderen √ºbertreffen?",
                "bei einer Party neue Freunde finden?",
                "die verr√ºcktesten Dance Moves zeigen?",
                "bei einer Party das Kost√ºm vergessen?",
                "beim Beer Pong unschlagbar sein?",
                "bei einer Hausparty beim Aufr√§umen helfen?",
                "bei einem Festival im Matsch tanzen?",
                "bei einer Party als DJ auflegen?",
                "bei einem Kost√ºmball die beste Verkleidung haben?",
                "bei einer Gartenparty grillen wollen?",
                "bei einer Silvesterparty um Mitternacht schlafen?",
                "bei einer Geburtstagsparty die Kerzen auspusten?",
                "bei einer Poolparty als erstes ins Wasser springen?",
                "bei einer Mottoparty das Thema ignorieren?",
                "bei einer Abschlussfeier emotional werden?",
                "bei einer √úberraschungsparty das Geheimnis verraten?"
            ],
            
            spicy: [
                "bei einem Date das Essen bezahlen?",
                "beim ersten Kuss die Augen offen lassen?",
                "eine Fernbeziehung f√ºhren?",
                "beim Speed-Dating als erstes 'Nein' sagen?",
                "bei einem romantischen Dinner sabbern?",
                "beim Flirten zu direkt sein?",
                "bei einem Blind Date weglaufen?",
                "beim K√ºssen gegen etwas sto√üen?",
                "bei einer Hochzeit den falschen Namen sagen?",
                "beim ersten Date √ºber den Ex sprechen?",
                "bei einem romantischen Film weinen?",
                "beim Valentinstag das Geschenk vergessen?",
                "bei einem Candle-Light-Dinner das Tischtuch anz√ºnden?",
                "beim ersten 'Ich liebe dich' stottern?",
                "bei einem Liebesbrief die falsche Person ansprechen?",
                "beim Heiratsantrag 'Nein' sagen?",
                "bei der Hochzeitsrede einen Blackout haben?",
                "beim Honeymoon krank werden?",
                "bei einem romantischen Picknick von Wespen attackiert werden?",
                "beim Anniversary das Datum vergessen?"
            ],
            
            wild: [
                "bei einer Mutprobe als erstes kneifen?",
                "beim Bungee-Jumping schreien wie ein Baby?",
                "bei einer Achterbahnfahrt sich √ºbergeben?",
                "beim Skydiving die Augen die ganze Zeit geschlossen halten?",
                "bei einem Horrorfilm unter der Decke verschwinden?",
                "beim Camping von einem K√§fer aufgeweckt werden?",
                "bei einer Nachtwanderung sich verlaufen?",
                "beim Klettern nach 2 Metern aufgeben?",
                "bei einer Geisterbahn um Hilfe schreien?",
                "beim Wildwasser-Rafting √ºber Bord gehen?",
                "bei einem Survival-Trip als erstes nach Hause wollen?",
                "beim Paragliding in Panik geraten?",
                "bei einer Safari das Tier f√ºttern wollen?",
                "beim Tauchen die Orientierung verlieren?",
                "bei einem Escape Room alle Hinweise √ºbersehen?",
                "beim Paintball sich sofort verstecken?",
                "bei einer Nachtsafari einschlafen?",
                "beim Ziplining stecken bleiben?",
                "bei einem Outdoor-Abenteuer den Weg nach Hause vergessen?",
                "beim Extremsport als erstes einen Helm verlangen?"
            ],
            
            freunde: [
                "bei einem Streit als erstes nachgeben?",
                "ein Geheimnis am l√§ngsten f√ºr sich behalten?",
                "bei einem Umzug als erstes helfen?",
                "bei Liebeskummer die beste Schulter zum Ausweinen sein?",
                "bei einer Gruppenentscheidung nie eine Meinung haben?",
                "beim Gruppenfotos immer lustige Gesichter machen?",
                "bei einem Spieleabend zu kompetitiv werden?",
                "bei einer Reise das meiste Gep√§ck haben?",
                "bei einem Restaurant-Besuch am l√§ngsten f√ºrs Essen brauchen?",
                "bei einer WhatsApp-Gruppe als erstes antworten?",
                "bei einem gemeinsamen Hobby schnell das Interesse verlieren?",
                "bei einer √úberraschungsparty das Geheimnis ausplaudern?",
                "bei einem Gruppenprojekt die meiste Arbeit machen?",
                "bei einem Filmabend den Film ausw√§hlen wollen?",
                "bei einem gemeinsamen Urlaub das Budget planen?",
                "bei einem Grillabend das Fleisch √ºbernehmen?",
                "bei einem Picknick das Essen vergessen?",
                "bei einem Spieleabend bei Monopoly ausrasten?",
                "bei einem Gruppengeschenk das meiste Geld ausgeben?",
                "bei einer Gruppenaktivit√§t als erstes m√ºde werden?"
            ],
            
            drama: [
                "bei einem Streit laut werden?",
                "bei schlechten Nachrichten √ºberreagieren?",
                "bei einem Missverst√§ndnis nicht nachfragen?",
                "bei Kritik beleidigt sein?",
                "bei einem Problem sofort aufgeben?",
                "bei Stress alle anderen anstecken?",
                "bei einer Diskussion pers√∂nlich werden?",
                "bei einem Fehler andere beschuldigen?",
                "bei einer Entt√§uschung tagelang schmollen?",
                "bei einem Kompliment misstrauisch werden?",
                "bei einer Ver√§nderung panisch reagieren?",
                "bei einem Vorwurf sofort rechtfertigen?",
                "bei einer Absage dramatisch reagieren?",
                "bei einem Konflikt alle anderen reinziehen?",
                "bei einer schlechten Bewertung aufh√∂ren?",
                "bei einem Misserfolg anderen die Schuld geben?",
                "bei einer Krise den Kopf in den Sand stecken?",
                "bei einer Herausforderung sofort zweifeln?",
                "bei einem R√ºckschlag alles hinschmei√üen?",
                "bei einer Niederlage schlechte Verlierer sein?"
            ],
            
            secrets: [
                "heimlich das Handy des Partners checken?",
                "bei einer L√ºge rot werden?",
                "bei einem Geheimnis platzen vor Neugier?",
                "bei einer peinlichen Geschichte alle Details erz√§hlen?",
                "bei einem Klatsch sofort weitererz√§hlen?",
                "bei einer √úberraschung Hinweise geben?",
                "bei einem Gest√§ndnis schockiert sein?",
                "bei einer Enth√ºllung √ºbertrieben reagieren?",
                "bei einem Skandal sofort urteilen?",
                "bei einer Verschw√∂rungstheorie sofort glauben?",
                "bei einem Ger√ºcht nachforschen?",
                "bei einem Tabu neugierig nachfragen?",
                "bei einer Beichte alle Details wollen?",
                "bei einem Verdacht sofort konfrontieren?",
                "bei einem Fehltritt hart verurteilen?",
                "bei einer Aff√§re Partei ergreifen?",
                "bei einem Geheimnis Detektiv spielen?",
                "bei einer Enth√ºllung geschockt schweigen?",
                "bei einem Skandal Distance halten?",
                "bei einer L√ºge sofort durchschauen?"
            ]
        };

        // Category metadata f√ºr Wer W√ºrde Eher
        const WER_WUERDE_CATEGORY_INFO = {
            klassisch: { emoji: "üß†", name: "Klassisch", count: 20 },
            party: { emoji: "üéâ", name: "Party", count: 20 },
            spicy: { emoji: "üå∂Ô∏è", name: "Spicy", count: 20 },
            wild: { emoji: "üêç", name: "Wild & Chaotisch", count: 20 },
            freunde: { emoji: "üë´", name: "Wahre Freunde", count: 20 },
            drama: { emoji: "üé≠", name: "Drama", count: 20 },
            secrets: { emoji: "üíÄ", name: "Dirty Little Secrets", count: 20 }
        };

        // EXPANDED Word categories for Impostor Game
        const WORD_CATEGORIES = {
            // üåç Rund um die Welt
            travel: [
                { word: "Eiffelturm", hint: "Paris" },
                { word: "Big Ben", hint: "London" },
                { word: "Kolosseum", hint: "Rom" },
                { word: "Pyramiden", hint: "√Ñgypten" },
                { word: "Taj Mahal", hint: "Indien" },
                { word: "Machu Picchu", hint: "Peru" },
                { word: "Neuschwanstein", hint: "Bayern" },
                { word: "Sagrada Familia", hint: "Barcelona" },
                { word: "Mount Rushmore", hint: "Amerika" },
                { word: "Brandenburger Tor", hint: "Berlin" },
                { word: "Statue of Liberty", hint: "New York" },
                { word: "Stonehenge", hint: "England" },
                { word: "Gondel", hint: "Venedig" },
                { word: "Safari", hint: "Afrika" },
                { word: "Sushi", hint: "Japan" },
                { word: "Oktoberfest", hint: "M√ºnchen" },
                { word: "Tulpen", hint: "Holland" },
                { word: "Tango", hint: "Argentinien" },
                { word: "Backpacking", hint: "Reisen" },
                { word: "Flughafen", hint: "Terminal" }
            ],

            // üçï Essen & Trinken
            food: [
                { word: "Sushi", hint: "Japanisch" },
                { word: "Croissant", hint: "Franz√∂sisch" },
                { word: "Tacos", hint: "Mexikanisch" },
                { word: "Pasta", hint: "Al dente" },
                { word: "Curry", hint: "Scharf" },
                { word: "D√∂ner", hint: "T√ºrkisch" },
                { word: "Ramen", hint: "Nudeln" },
                { word: "Burger", hint: "Amerikanisch" },
                { word: "Spaghetti", hint: "Lang" },
                { word: "Popcorn", hint: "Knallt" },
                { word: "Wasabi", hint: "Brennt" },
                { word: "Mozzarella", hint: "Cremig" },
                { word: "Pizza", hint: "Italienisch" },
                { word: "Bratwurst", hint: "Deutsch" },
                { word: "Kimchi", hint: "Koreanisch" },
                { word: "Bolognese", hint: "So√üe" },
                { word: "Tiramisu", hint: "Dessert" },
                { word: "Paella", hint: "Spanisch" },
                { word: "Guacamole", hint: "Avocado" },
                { word: "Baguette", hint: "Stange" },
                { word: "Churros", hint: "S√º√ü" },
                { word: "Gazpacho", hint: "Kalt" },
                { word: "Maultaschen", hint: "Schw√§bisch" },
                { word: "Schnitzel", hint: "Paniert" },
                { word: "Kaiserschmarren", hint: "√ñsterreich" }
            ],
            
            // üì± Objekte & Technik
            objects: [
                { word: "Regenschirm", hint: "Sch√ºtzt" },
                { word: "AirPods", hint: "Musik" },
                { word: "Skateboard", hint: "Rollt" },
                { word: "Fernbedienung", hint: "TV" },
                { word: "Sonnenbrille", hint: "Cool" },
                { word: "Rucksack", hint: "Tr√§gt" },
                { word: "Wasserflasche", hint: "Durst" },
                { word: "Powerbank", hint: "Strom" },
                { word: "Laptop", hint: "Aufklappen" },
                { word: "Bluetooth-Box", hint: "Drahtlos" },
                { word: "Smartwatch", hint: "Handgelenk" },
                { word: "Gaming-Stuhl", hint: "Zocken" },
                { word: "Kamera", hint: "Aufnahme" },
                { word: "Schreibtisch", hint: "Arbeiten" },
                { word: "K√ºhlschrank", hint: "Abk√ºhlen" },
                { word: "Hoodie", hint: "Kapuze" },
                { word: "Monitor", hint: "Bild" },
                { word: "Spiegel", hint: "Reflex" },
                { word: "Timer", hint: "Zeit" },
                { word: "Snackautomat", hint: "Klemmt" },
                { word: "Escape Room", hint: "R√§tsel" },
                { word: "Smartphone", hint: "Immer dabei" },
                { word: "Kopfh√∂rer", hint: "Privat h√∂ren" },
                { word: "Tablet", hint: "Touchscreen" },
                { word: "Drohne", hint: "Fliegt" }
            ]
        };

        // Category metadata for Impostor - emoji and names
        const CATEGORY_INFO = {
            alle: { emoji: "üéØ", name: "Alle Kategorien", count: 0 },
            travel: { emoji: "üåç", name: "Rund um die Welt", count: 20 },
            food: { emoji: "üçï", name: "Essen & Trinken", count: 25 },
            objects: { emoji: "üì±", name: "Objekte & Technik", count: 25 }
        };

        // Calculate total count for "alle"
        CATEGORY_INFO.alle.count = Object.keys(WORD_CATEGORIES).reduce((total, key) => {
            if (key !== 'alle') {
                return total + WORD_CATEGORIES[key].length;
            }
            return total;
        }, 0);

        const coolEmojis = ['üòé', 'ü§©', 'üî•', '‚ö°', 'üéØ', 'üíÄ', 'üíé', 'üëæ', 'ü™º', 'üéä', 'üéâ', 'ü¶Ñ', 'üêâ', 'üëë', 'üèÜ'];

        // Achievement definitions
        const ACHIEVEMENTS = {
            firstGame: { name: "Erstes Spiel", description: "Spiele dein erstes Spiel", icon: "üéÆ" },
            veteran: { name: "Veteran", description: "Spiele 25 Spiele", icon: "üèÖ" },
            speedRunner: { name: "Speedrunner", description: "Spiele unter 30 Sekunden", icon: "‚ö°" },
            marathon: { name: "Marathon", description: "Spiele √ºber 10 Minuten", icon: "üèÉ" },
            social: { name: "Gesellig", description: "Spiele mit 10+ Personen", icon: "üë•" },
            dedicated: { name: "Hingabe", description: "Spiele 100 Spiele", icon: "üíØ" },
            explorer: { name: "Entdecker", description: "Spiele alle Kategorien", icon: "üó∫Ô∏è" },
            curious: { name: "Neugierig", description: "Finde das Easter Egg", icon: "üïµÔ∏è" }
        };

        // Audio Context for Sound Effects
        let audioContext;

        // Initialize player names array
        function initializePlayerNames() {
            gameState.playerNames = [];
            for (let i = 1; i <= gameState.totalPlayers; i++) {
                gameState.playerNames.push(`Spieler ${i}`);
            }
        }

        // Easter Egg Function
        function handleEasterEggClick() {
            easterEggClicks++;
            playSound('tap');
            
            if (easterEggTimer) {
                clearTimeout(easterEggTimer);
            }
            
            easterEggTimer = setTimeout(() => {
                easterEggClicks = 0;
            }, 3000);
            
            if (easterEggClicks >= 5) {
                easterEggClicks = 0;
                clearTimeout(easterEggTimer);
                
                if (!achievements.curious) {
                    achievements.curious = true;
                    showAchievementNotification([ACHIEVEMENTS.curious]);
                }
                
                setTimeout(() => {
                    showComingSoonModal();
                }, 1000);
                
                return;
            }
            
            const card = event.target.closest('.coming-soon-card');
            if (card) {
                card.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    card.style.transform = 'scale(1)';
                }, 100);
                
                vibrate([20]);
            }
        }
        
        // Sound Effects
        function playSound(type) {
            if (!settings.soundsEnabled) return;
            
            try {
                if (!audioContext) {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                }
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                switch(type) {
                    case 'card-flip':
                        oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(300, audioContext.currentTime + 0.15);
                        gainNode.gain.setValueAtTime(0.08, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.15);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.15);
                        break;
                        
                    case 'success':
                        oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
                        oscillator.frequency.setValueAtTime(554, audioContext.currentTime + 0.1);
                        oscillator.frequency.setValueAtTime(659, audioContext.currentTime + 0.2);
                        oscillator.frequency.setValueAtTime(880, audioContext.currentTime + 0.3);
                        gainNode.gain.setValueAtTime(0.12, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.4);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.4);
                        break;
                        
                    case 'shuffle':
                        for(let i = 0; i < 4; i++) {
                            const osc = audioContext.createOscillator();
                            const gain = audioContext.createGain();
                            osc.connect(gain);
                            gain.connect(audioContext.destination);
                            osc.frequency.setValueAtTime(200 + i * 80, audioContext.currentTime + i * 0.08);
                            gain.gain.setValueAtTime(0.06, audioContext.currentTime + i * 0.08);
                            gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + i * 0.08 + 0.12);
                            osc.start(audioContext.currentTime + i * 0.08);
                            osc.stop(audioContext.currentTime + i * 0.08 + 0.12);
                        }
                        break;
                        
                    case 'tap':
                        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.08);
                        gainNode.gain.setValueAtTime(0.05, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.08);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.08);
                        break;
                }
            } catch(e) {
                console.log('Audio not supported');
            }
        }

        // Haptic Feedback
        function vibrate(pattern) {
            if (settings.vibrationEnabled && 'vibrate' in navigator) {
                navigator.vibrate(pattern || [100]);
            }
        }

        // Screen Management
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
            
            const settingsIcon = document.getElementById('settingsIcon');
            const infoIcon = document.getElementById('infoIcon');
            
            if (settingsIcon && infoIcon) {
                if (screenId === 'modeSelectScreen') {
                    settingsIcon.style.display = 'flex';
                    infoIcon.style.display = 'flex';
                } else {
                    settingsIcon.style.display = 'none';
                    infoIcon.style.display = 'none';
                }
            }
        }

        function showModeSelect() {
            showScreen('modeSelectScreen');
        }

        // Screen transition effects
        function showCleanTransition(targetScreen, callback) {
            const transition = document.getElementById('screenTransition');
            
            transition.classList.add('active');
            if (targetScreen === 'impostor') {
                transition.classList.add('impostor');
            } else if (targetScreen === 'wer-wuerde') {
                transition.classList.add('wer-wuerde');
            }
            
            setTimeout(() => {
                if (callback) callback();
                setTimeout(() => {
                    transition.classList.remove('active', 'impostor', 'wer-wuerde');
                }, 100);
            }, 150);
        }

        function showImpostorSettings() {
            showCleanTransition('impostor', () => {
                showScreen('impostorScreen');
                updateGameSettingsDisplay();
            });
        }

        function showWerWuerdeSettings() {
            showCleanTransition('wer-wuerde', () => {
                showScreen('werWuerdeScreen');
                updateWerWuerdeSettingsDisplay();
            });
        }

        // Impostor Game Functions
        function changePlayerCount(delta) {
            gameState.totalPlayers = Math.max(3, Math.min(20, gameState.totalPlayers + delta));
            if (gameState.impostors >= Math.floor(gameState.totalPlayers / 2)) {
                gameState.impostors = Math.max(1, Math.floor(gameState.totalPlayers / 2) - 1);
            }
            
            while (gameState.playerNames.length < gameState.totalPlayers) {
                gameState.playerNames.push(`Spieler ${gameState.playerNames.length + 1}`);
            }
            if (gameState.playerNames.length > gameState.totalPlayers) {
                gameState.playerNames = gameState.playerNames.slice(0, gameState.totalPlayers);
            }
            
            updateGameSettingsDisplay();
            playSound('card-flip');
        }

        function changeImpostorCount(delta) {
            gameState.impostors = Math.max(1, Math.min(Math.floor(gameState.totalPlayers / 2), gameState.impostors + delta));
            updateGameSettingsDisplay();
            playSound('card-flip');
        }

        function toggleTimer() {
            gameState.timerEnabled = !gameState.timerEnabled;
            const toggle = document.getElementById('timerToggle');
            const minutesRow = document.getElementById('timerMinutesRow');
            
            toggle.classList.toggle('active', gameState.timerEnabled);
            minutesRow.style.display = gameState.timerEnabled ? 'flex' : 'none';
            playSound('card-flip');
        }

        function changeTimerMinutes(delta) {
            gameState.timerMinutes = Math.max(1, Math.min(10, gameState.timerMinutes + delta));
            document.getElementById('timerMinutesCount').textContent = gameState.timerMinutes;
            playSound('card-flip');
        }

        function toggleHints() {
            gameState.hintsEnabled = !gameState.hintsEnabled;
            document.getElementById('hintsToggle').classList.toggle('active', gameState.hintsEnabled);
            playSound('card-flip');
        }

        function updateGameSettingsDisplay() {
            document.getElementById('playersCount').textContent = gameState.totalPlayers;
            document.getElementById('impostorsCount').textContent = gameState.impostors;
            document.getElementById('timerMinutesCount').textContent = gameState.timerMinutes;
            
            const timerToggle = document.getElementById('timerToggle');
            const minutesRow = document.getElementById('timerMinutesRow');
            timerToggle.classList.toggle('active', gameState.timerEnabled);
            minutesRow.style.display = gameState.timerEnabled ? 'flex' : 'none';
            
            updateCategoryButton();
        }

        function updateCategoryButton() {
            const categoryButton = document.getElementById('categoryButton');
            const categoryEmoji = document.getElementById('categoryEmoji');
            const categoryText = document.getElementById('categoryText');
            
            if (gameState.selectedCategories.includes('alle') || gameState.selectedCategories.length === 0) {
                categoryEmoji.textContent = CATEGORY_INFO.alle.emoji;
                categoryText.textContent = CATEGORY_INFO.alle.name;
            } else if (gameState.selectedCategories.length === 1) {
                const category = CATEGORY_INFO[gameState.selectedCategories[0]];
                categoryEmoji.textContent = category.emoji;
                categoryText.textContent = category.name;
            } else {
                categoryEmoji.textContent = 'üéØ';
                categoryText.textContent = `${gameState.selectedCategories.length} Kategorien`;
            }
        }

        // Names Management Functions
        function showNamesModal() {
            while (gameState.playerNames.length < gameState.totalPlayers) {
                gameState.playerNames.push(`Spieler ${gameState.playerNames.length + 1}`);
            }
            
            updateNamesDisplay();
            document.getElementById('namesModal').classList.add('visible');
            playSound('tap');
        }

        function closeNamesModal() {
            document.getElementById('namesModal').classList.remove('visible');
            playSound('tap');
        }

        function updateNamesDisplay() {
            const namesList = document.getElementById('namesList');
            namesList.innerHTML = '';
            
            for (let i = 0; i < gameState.totalPlayers; i++) {
                const nameItem = document.createElement('div');
                nameItem.className = 'category-item';
                nameItem.onclick = () => editPlayerName(i);
                
                nameItem.innerHTML = `
                    <div class="category-display">
                        <span class="category-emoji">${i + 1}</span>
                        <span id="nameDisplay${i}">${gameState.playerNames[i] || `Spieler ${i + 1}`}</span>
                    </div>
                    <div class="category-count">‚úèÔ∏è</div>
                `;
                
                namesList.appendChild(nameItem);
            }
        }

        function editPlayerName(playerIndex) {
            const nameDisplay = document.getElementById(`nameDisplay${playerIndex}`);
            const currentName = gameState.playerNames[playerIndex] || `Spieler ${playerIndex + 1}`;
            
            nameDisplay.innerHTML = `<input type="text" style="background: transparent; border: none; color: white; font-size: clamp(16px, 4vw, 18px); font-weight: 600; outline: none; width: 100%; padding: 0;" id="nameInput${playerIndex}" value="${currentName}" maxlength="20">`;
            
            const input = document.getElementById(`nameInput${playerIndex}`);
            input.focus();
            input.select();
            
            const saveEdit = () => {
                const newName = input.value.trim() || `Spieler ${playerIndex + 1}`;
                gameState.playerNames[playerIndex] = newName;
                nameDisplay.textContent = newName;
                playSound('tap');
            };
            
            input.addEventListener('blur', saveEdit);
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    saveEdit();
                }
            });
        }

        // Categories Management for Impostor
        function showCategoriesModal() {
            updateCategoriesDisplay();
            document.getElementById('categoriesModal').classList.add('visible');
            playSound('tap');
        }

        function closeCategoriesModal() {
            document.getElementById('categoriesModal').classList.remove('visible');
            updateCategoryButton();
            playSound('tap');
        }

        function updateCategoriesDisplay() {
            const categoriesList = document.getElementById('categoriesList');
            categoriesList.innerHTML = '';
            
            Object.keys(CATEGORY_INFO).forEach(categoryKey => {
                const category = CATEGORY_INFO[categoryKey];
                const isSelected = gameState.selectedCategories.includes(categoryKey);
                
                const categoryItem = document.createElement('div');
                categoryItem.className = `category-item ${isSelected ? 'selected' : ''}`;
                categoryItem.onclick = () => toggleCategory(categoryKey);
                
                categoryItem.innerHTML = `
                    <div class="category-display">
                        <span class="category-emoji">${category.emoji}</span>
                        <span>${category.name}</span>
                    </div>
                    <div class="category-count">${category.count}</div>
                `;
                
                categoriesList.appendChild(categoryItem);
            });
        }

        function toggleCategory(categoryKey) {
            if (categoryKey === 'alle') {
                gameState.selectedCategories = ['alle'];
            } else {
                if (gameState.selectedCategories.includes('alle')) {
                    gameState.selectedCategories = [];
                }
                
                const index = gameState.selectedCategories.indexOf(categoryKey);
                if (index > -1) {
                    gameState.selectedCategories.splice(index, 1);
                } else {
                    gameState.selectedCategories.push(categoryKey);
                }
                
                if (gameState.selectedCategories.length === 0) {
                    gameState.selectedCategories = ['alle'];
                }
            }
            
            updateCategoriesDisplay();
            playSound('tap');
        }

        // Show role with hold-to-reveal functionality
        function showRole() {
            const isImpostor = gameState.impostorPlayers.includes(gameState.currentPlayer);
            const roleIcon = document.getElementById('roleIcon');
            const roleText = document.getElementById('roleText');
            const wordOrHint = document.getElementById('wordOrHint');
            
            if (isImpostor) {
                roleIcon.textContent = '‚úï';
                roleIcon.style.background = '#f44336';
                roleText.textContent = '';
                if (gameState.hintsEnabled) {
                    wordOrHint.innerHTML = `<div style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: clamp(18px, 4.5vw, 24px); font-size: clamp(18px, 4.5vw, 22px); color: #666; backdrop-filter: blur(10px); margin-bottom: 8px; min-height: clamp(60px, 12vh, 80px); display: flex; align-items: center; justify-content: center;">Tipp: ${gameState.gameHint}</div>`;
                } else {
                    wordOrHint.innerHTML = '<div style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: clamp(18px, 4.5vw, 24px); font-size: clamp(18px, 4.5vw, 22px); color: #666; backdrop-filter: blur(10px); margin-bottom: 8px; min-height: clamp(60px, 12vh, 80px); display: flex; align-items: center; justify-content: center;">Kein Tipp verf√ºgbar</div>';
                }
            } else {
                roleIcon.textContent = '‚úì';
                roleIcon.style.background = '#4CAF50';
                roleText.textContent = '';
                wordOrHint.innerHTML = `<div style="background: rgba(255,255,255,0.95); border-radius: 20px; padding: clamp(20px, 5vw, 28px); font-size: clamp(26px, 6.5vw, 32px); font-weight: 700; color: #333; backdrop-filter: blur(10px); margin-bottom: 8px;">${gameState.gameWord}</div>`;
            }
            
            document.getElementById('revealedContent').style.opacity = '1';
            document.getElementById('revealedContent').style.transform = 'translateY(0)';
            document.getElementById('revealedContent').style.pointerEvents = 'auto';
            document.getElementById('playerCard').style.transform = 'translateY(-20px)';
            document.getElementById('playerCard').style.boxShadow = '0 28px 60px rgba(0,0,0,0.3)';
            
            const instructionText = document.getElementById('instructionText');
            if (instructionText) {
                instructionText.style.opacity = '0';
            }
            
            playSound('tap');
            vibrate([30]);
        }

        function hideRole() {
            document.getElementById('revealedContent').style.opacity = '0';
            document.getElementById('revealedContent').style.transform = 'translateY(10px)';
            document.getElementById('revealedContent').style.pointerEvents = 'none';
            document.getElementById('playerCard').style.transform = 'translateY(0)';
            document.getElementById('playerCard').style.boxShadow = '0 16px 40px rgba(0,0,0,0.2)';
            
            gameState.hasRevealed = true;
            
            const instructionText = document.getElementById('instructionText');
            if (instructionText) {
                instructionText.style.opacity = '1';
                instructionText.textContent = 'Ger√§t an den n√§chsten Spieler weitergeben';
            }
            
            setTimeout(() => {
                if (gameState.hasRevealed) {
                    const nextButton = document.getElementById('nextButton');
                    nextButton.style.opacity = '1';
                    nextButton.style.pointerEvents = 'auto';
                    nextButton.style.transform = 'translateX(-50%) translateY(0)';
                }
            }, 400);
        }

        function handleNextPlayer() {
            const nextButton = document.getElementById('nextButton');
            
            if (gameState.currentPlayer < gameState.totalPlayers) {
                nextButton.style.transform = 'translateX(-50%) scale(0.96)';
                setTimeout(() => {
                    nextButton.style.transform = 'translateX(-50%) scale(1)';
                }, 150);
                
                const playerCard = document.getElementById('playerCard');
                playerCard.style.animation = 'cardFlip 0.6s ease-in-out';
                playSound('card-flip');
                vibrate([50]);
                
                nextButton.style.opacity = '0';
                nextButton.style.pointerEvents = 'none';
                nextButton.style.transform = 'translateX(-50%) translateY(20px)';
                
                setTimeout(() => {
                    gameState.currentPlayer++;
                    updateGameDisplay();
                    playerCard.style.animation = '';
                }, 600);
                
            } else {
                nextButton.style.transform = 'translateX(-50%) scale(0.96)';
                nextButton.textContent = 'Spiel startet...';
                
                setTimeout(() => {
                    nextButton.style.transform = 'translateX(-50%) scale(1)';
                    showGameStarted();
                    nextButton.textContent = 'Weitergeben';
                    nextButton.style.opacity = '0';
                    nextButton.style.pointerEvents = 'none';
                    playSound('success');
                    vibrate([100, 50, 100]);
                }, 800);
            }
        }

        function showGameStarted() {
            showScreen('gameStartedScreen');
            updateGameStartedDisplay();
        }

        function updateGameStartedDisplay() {
            gameState.startingPlayer = Math.floor(Math.random() * gameState.totalPlayers) + 1;
            
            const starterName = gameState.playerNames[gameState.startingPlayer - 1] || `Spieler ${gameState.startingPlayer}`;
            const starterText = document.getElementById('starterText');
            starterText.textContent = `${starterName} beginnt`;
            starterText.style.animation = 'pulse 2s infinite';
            
            if (gameState.timerEnabled) {
                gameState.timeLeft = gameState.timerMinutes * 60;
                document.getElementById('timerDisplay').classList.remove('hidden');
                startTimer();
            } else {
                document.getElementById('timerDisplay').classList.add('hidden');
            }
            
            setTimeout(() => {
                starterText.style.animation = 'none';
                starterText.style.fontSize = 'clamp(20px, 5vw, 24px)';
            }, 5000);
        }

        function startTimer() {
            if (gameState.timer) {
                clearInterval(gameState.timer);
            }
            
            updateTimerDisplay();
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                updateTimerDisplay();
                
                if (gameState.timeLeft === 10) {
                    vibrate([200, 200, 200]);
                }
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timer);
                    gameState.timer = null;
                    vibrate([500, 200, 500]);
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.timeLeft / 60);
            const seconds = gameState.timeLeft % 60;
            const display = document.getElementById('timerDisplay');
            display.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            if (gameState.timeLeft <= 30) {
                display.style.background = 'rgba(244, 67, 54, 0.8)';
            } else if (gameState.timeLeft <= 60) {
                display.style.background = 'rgba(255, 193, 7, 0.8)';
            }
        }

        function showRoles() {
            showScreen('endScreen');
            displayRoles();
            showConfetti();
            playSound('success');
            vibrate([200, 100, 200]);
        }

        function displayRoles() {
            const rolesList = document.getElementById('rolesList');
            rolesList.innerHTML = '';
            
            gameState.roundDuration = Math.round((Date.now() - gameState.gameStartTime) / 1000);
            
            playerStats.gamesPlayed++;
            playerStats.totalPlayTime += gameState.roundDuration;
            
            if (!playerStats.fastestGame || gameState.roundDuration < parseInt(playerStats.fastestGame)) {
                playerStats.fastestGame = gameState.roundDuration + 's';
            }
            if (!playerStats.longestGame || gameState.roundDuration > parseInt(playerStats.longestGame)) {
                playerStats.longestGame = gameState.roundDuration + 's';
            }
            
            gameHistory.push({
                date: Date.now(),
                word: gameState.gameWord,
                players: gameState.totalPlayers,
                duration: gameState.roundDuration + 's'
            });
            
            if (gameHistory.length > 50) {
                gameHistory.shift();
            }
            
            checkAchievements();
            
            for (let i = 1; i <= gameState.totalPlayers; i++) {
                const isImpostor = gameState.impostorPlayers.includes(i);
                const playerEmoji = gameState.playerEmojis[i-1] || 'üë§';
                const playerName = gameState.playerNames[i-1] || `Spieler ${i}`;
                
                const roleItem = document.createElement('div');
                roleItem.style.cssText = 'display: flex; justify-content: space-between; align-items: center; background: rgba(28, 28, 30, 0.95); border-radius: 20px; padding: clamp(16px, 4vw, 20px); margin: 12px 0; color: white; backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2);';
                
                const rolePlayer = document.createElement('div');
                rolePlayer.style.cssText = 'display: flex; align-items: center; font-size: clamp(16px, 4vw, 18px); font-weight: 600; flex: 1;';
                
                const roleIcon = document.createElement('div');
                roleIcon.style.cssText = `width: 32px; height: 32px; font-size: 16px; margin-right: 14px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: ${isImpostor ? '#f44336' : '#4CAF50'}; color: white; font-weight: bold;`;
                roleIcon.textContent = isImpostor ? '‚úï' : '‚úì';
                
                const playerText = document.createElement('span');
                playerText.textContent = `${playerEmoji} ${playerName}`;
                
                rolePlayer.appendChild(roleIcon);
                rolePlayer.appendChild(playerText);
                
                const roleResult = document.createElement('div');
                roleResult.style.cssText = 'font-size: clamp(14px, 3.5vw, 16px); text-align: right; margin-left: 14px; color: white;';
                
                if (isImpostor) {
                    roleResult.innerHTML = `<strong>Impostor</strong>` + 
                        (gameState.hintsEnabled && gameState.gameHint ? `<br><small>Tipp: ${gameState.gameHint}</small>` : '');
                } else {
                    roleResult.innerHTML = `<strong>${gameState.gameWord}</strong>`;
                }
                
                roleItem.appendChild(rolePlayer);
                roleItem.appendChild(roleResult);
                rolesList.appendChild(roleItem);
            }
        }

        // Confetti Animation
        function showConfetti() {
            const confettiContainer = document.getElementById('confetti');
            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE'];
            const emojis = ['üéâ', 'üéä', '‚≠ê', '‚ú®', 'üéà', 'üéÅ', 'üèÜ', 'üëè'];
            
            const screenWidth = window.innerWidth;
            let confettiCount = screenWidth < 480 ? 80 : screenWidth < 768 ? 100 : 150;
            let baseVelocity = screenWidth < 480 ? 120 : screenWidth < 768 ? 150 : 200;
            let maxVelocity = screenWidth < 480 ? 200 : screenWidth < 768 ? 250 : 300;
            
            for (let i = 0; i < confettiCount; i++) {
                const confettiPiece = document.createElement('div');
                confettiPiece.style.cssText = 'position: absolute; left: 50%; top: 50%;';
                
                if (Math.random() < 0.6) {
                    const shapes = ['square', 'circle', 'triangle'];
                    const shape = shapes[Math.floor(Math.random() * shapes.length)];
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    
                    if (shape === 'square') {
                        confettiPiece.style.cssText += `width: clamp(6px, 1.5vw, 8px); height: clamp(6px, 1.5vw, 8px); background: ${color}; border-radius: 2px;`;
                    } else if (shape === 'circle') {
                        confettiPiece.style.cssText += `width: clamp(4px, 1vw, 6px); height: clamp(4px, 1vw, 6px); background: ${color}; border-radius: 50%;`;
                    } else {
                        confettiPiece.style.cssText += `width: 0; height: 0; border-left: clamp(3px, 0.75vw, 4px) solid transparent; border-right: clamp(3px, 0.75vw, 4px) solid transparent; border-bottom: clamp(6px, 1.5vw, 8px) solid ${color};`;
                    }
                } else {
                    confettiPiece.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                    confettiPiece.style.cssText += 'font-size: clamp(10px, 2.5vw, 14px);';
                }
                
                const angle = (Math.PI * 2 * i) / confettiCount;
                const velocity = Math.random() * maxVelocity + baseVelocity;
                const dx = Math.cos(angle) * velocity;
                const dy = Math.sin(angle) * velocity;
                const fx = (Math.random() - 0.5) * (screenWidth < 480 ? 100 : 200);
                
                const duration = screenWidth < 480 ? (Math.random() * 1.5 + 2.5) : (Math.random() * 2 + 3);
                
                confettiPiece.style.animation = `confettiExplode ${duration}s ease-out forwards`;
                confettiPiece.style.animationDelay = Math.random() * 0.5 + 's';
                confettiPiece.style.setProperty('--dx', dx + 'px');
                confettiPiece.style.setProperty('--dy', dy + 'px');
                confettiPiece.style.setProperty('--fx', fx + 'px');
                
                confettiContainer.appendChild(confettiPiece);
                
                setTimeout(() => {
                    if (confettiPiece.parentNode) {
                        confettiPiece.remove();
                    }
                }, (duration + 0.5) * 1000);
            }
        }

        // Add missing CSS animations
        const style = document.createElement('style');
        style.textContent = `
            .player-card.flipping {
                animation: cardFlip 0.6s ease-in-out;
            }
            
            @keyframes cardFlip {
                0% { transform: rotateY(0deg) scale(1); }
                50% { transform: rotateY(90deg) scale(0.95); }
                100% { transform: rotateY(0deg) scale(1); }
            }
            
            .revealed-content.visible {
                opacity: 1 !important;
                transform: translateY(0) !important;
                pointer-events: auto !important;
            }
            
            #nextButton.visible {
                opacity: 1 !important;
                pointer-events: auto !important;
                transform: translateX(-50%) translateY(0) !important;
            }
            
            .starter-text.shrunk {
                font-size: clamp(20px, 5vw, 24px) !important;
                animation: none !important;
            }
            
            @keyframes pulse {
                0%, 100% { opacity: 1; transform: scale(1); }
                50% { opacity: 0.8; transform: scale(1.05); }
            }
            
            @keyframes confettiExplode {
                0% {
                    transform: translate(-50%, -50%) scale(0) rotate(0deg);
                    opacity: 1;
                }
                15% {
                    transform: translate(var(--dx), var(--dy)) scale(1) rotate(180deg);
                    opacity: 1;
                }
                100% {
                    transform: translate(calc(var(--dx) + var(--fx)), calc(var(--dy) + 100vh)) scale(0.5) rotate(720deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
        function updateWerWuerdeSettingsDisplay() {
            updateWerWuerdeCategoryButton();
        }

        function updateWerWuerdeCategoryButton() {
            const categoryButton = document.getElementById('werWuerdeCategoryButton');
            const categoryEmoji = document.getElementById('werWuerdeCategoryEmoji');
            const categoryText = document.getElementById('werWuerdeCategoryText');
            
            if (werWuerdeState.selectedCategories.length === 1) {
                const category = WER_WUERDE_CATEGORY_INFO[werWuerdeState.selectedCategories[0]];
                categoryEmoji.textContent = category.emoji;
                categoryText.textContent = category.name;
            } else {
                categoryEmoji.textContent = 'üéØ';
                categoryText.textContent = `${werWuerdeState.selectedCategories.length} Kategorien`;
            }
        }

        function showWerWuerdeCategoriesModal() {
            updateWerWuerdeCategoriesDisplay();
            document.getElementById('werWuerdeCategoriesModal').classList.add('visible');
        }

        function closeWerWuerdeCategoriesModal() {
            document.getElementById('werWuerdeCategoriesModal').classList.remove('visible');
            updateWerWuerdeCategoryButton();
        }

        function updateWerWuerdeCategoriesDisplay() {
            const categoriesList = document.getElementById('werWuerdeCategoriesList');
            categoriesList.innerHTML = '';
            
            Object.keys(WER_WUERDE_CATEGORY_INFO).forEach(categoryKey => {
                const category = WER_WUERDE_CATEGORY_INFO[categoryKey];
                const isSelected = werWuerdeState.selectedCategories.includes(categoryKey);
                
                const categoryItem = document.createElement('div');
                categoryItem.className = `category-item ${isSelected ? 'selected' : ''}`;
                categoryItem.onclick = () => toggleWerWuerdeCategory(categoryKey);
                
                categoryItem.innerHTML = `
                    <div class="category-display">
                        <span class="category-emoji">${category.emoji}</span>
                        <span>${category.name}</span>
                    </div>
                    <div class="category-count">${category.count}</div>
                `;
                
                categoriesList.appendChild(categoryItem);
            });
        }

        function toggleWerWuerdeCategory(categoryKey) {
            const index = werWuerdeState.selectedCategories.indexOf(categoryKey);
            if (index > -1) {
                werWuerdeState.selectedCategories.splice(index, 1);
            } else {
                werWuerdeState.selectedCategories.push(categoryKey);
            }
            
            if (werWuerdeState.selectedCategories.length === 0) {
                werWuerdeState.selectedCategories = ['klassisch'];
            }
            
            updateWerWuerdeCategoriesDisplay();
        }

        function showGame() {
            showScreen('gameScreen');
            updateGameDisplay();
        }

        function startWerWuerdeGame() {
            werWuerdeState.usedQuestions = [];
            showCleanTransition('wer-wuerde', () => {
                showScreen('werWuerdeGameScreen');
                showRandomWerWuerdeQuestion();
            });
        }

        function showRandomWerWuerdeQuestion() {
            let availableQuestions = [];
            werWuerdeState.selectedCategories.forEach(categoryKey => {
                if (WER_WUERDE_QUESTIONS[categoryKey]) {
                    availableQuestions = availableQuestions.concat(WER_WUERDE_QUESTIONS[categoryKey]);
                }
            });
            
            availableQuestions = availableQuestions.filter(q => 
                !werWuerdeState.usedQuestions.includes(q)
            );
            
            if (availableQuestions.length === 0) {
                werWuerdeState.usedQuestions = [];
                availableQuestions = [];
                werWuerdeState.selectedCategories.forEach(categoryKey => {
                    if (WER_WUERDE_QUESTIONS[categoryKey]) {
                        availableQuestions = availableQuestions.concat(WER_WUERDE_QUESTIONS[categoryKey]);
                    }
                });
            }
            
            const randomQuestion = availableQuestions[Math.floor(Math.random() * availableQuestions.length)];
            werWuerdeState.usedQuestions.push(randomQuestion);
            
            document.getElementById('werWuerdeQuestion').textContent = randomQuestion;
        }

        function nextWerWuerdeQuestion() {
            showRandomWerWuerdeQuestion();
            playSound('tap');
        }

        // Impostor Game Logic
        function generateGame() {
            let selectedWords = [];
            
            if (gameState.selectedCategories.includes('alle') || gameState.selectedCategories.length === 0) {
                Object.keys(WORD_CATEGORIES).forEach(categoryKey => {
                    if (categoryKey !== 'alle') {
                        selectedWords = selectedWords.concat(WORD_CATEGORIES[categoryKey]);
                    }
                });
            } else {
                gameState.selectedCategories.forEach(categoryKey => {
                    if (WORD_CATEGORIES[categoryKey]) {
                        selectedWords = selectedWords.concat(WORD_CATEGORIES[categoryKey]);
                    }
                });
            }
            
            const selectedWord = selectedWords[Math.floor(Math.random() * selectedWords.length)];
            gameState.gameWord = selectedWord.word;
            gameState.gameHint = selectedWord.hint;
            
            gameState.impostorPlayers = [];
            while (gameState.impostorPlayers.length < gameState.impostors) {
                const randomPlayer = Math.floor(Math.random() * gameState.totalPlayers) + 1;
                if (!gameState.impostorPlayers.includes(randomPlayer)) {
                    gameState.impostorPlayers.push(randomPlayer);
                }
            }
            
            gameState.playerEmojis = [];
            for (let i = 0; i < gameState.totalPlayers; i++) {
                gameState.playerEmojis.push(coolEmojis[i % coolEmojis.length]);
            }
        }

        function startGame() {
            if (gameState.playerNames.length === 0) {
                initializePlayerNames();
            }
            
            generateGame();
            gameState.currentPlayer = 1;
            gameState.gameStartTime = Date.now();
            
            showCleanTransition('impostor', () => {
                showScreen('gameScreen');
                updateGameDisplay();
            });
            
            playSound('shuffle');
            vibrate([50, 50, 50]);
        }

        function updateGameDisplay() {
            const playerName = gameState.playerNames[gameState.currentPlayer - 1] || `Spieler ${gameState.currentPlayer}`;
            document.getElementById('playerTitle').textContent = playerName;
            document.getElementById('playerEmoji').textContent = gameState.playerEmojis[gameState.currentPlayer - 1] || 'üë§';
            
            if (gameState.currentPlayer < gameState.totalPlayers) {
                document.getElementById('nextButton').textContent = 'Weitergeben';
            } else {
                document.getElementById('nextButton').textContent = 'Spiel starten';
            }
            
            const nextButton = document.getElementById('nextButton');
            nextButton.classList.remove('visible');
            
            gameState.hasRevealed = false;
            
            const instructionText = document.getElementById('instructionText');
            if (instructionText) {
                instructionText.style.opacity = '1';
                instructionText.textContent = 'Ziehe deine Karte nach oben, um das Wort zu sehen. Achte darauf, dass niemand es sieht.';
            }
        }

        // Scroll to specific card and update indicators
        function scrollToCard(cardIndex) {
            const container = document.getElementById('gamesContainer');
            const gameCard = container.querySelectorAll('.game-card')[cardIndex];
            if (!gameCard) return;
            
            const cardWidth = gameCard.offsetWidth + 20;
            container.scrollTo({
                left: cardIndex * cardWidth,
                behavior: 'smooth'
            });
            
            setTimeout(() => {
                updateCardIndicators();
            }, 100);
        }

        // Update card indicators based on scroll position
        function updateCardIndicators() {
            const container = document.getElementById('gamesContainer');
            const cards = container.querySelectorAll('.game-card');
            
            if (cards.length === 0) return;
            
            const containerRect = container.getBoundingClientRect();
            const containerCenter = containerRect.left + containerRect.width / 2;
            
            let activeIndex = 0;
            let minDistance = Infinity;
            
            cards.forEach((card, index) => {
                const cardRect = card.getBoundingClientRect();
                const cardCenter = cardRect.left + cardRect.width / 2;
                const distance = Math.abs(cardCenter - containerCenter);
                
                if (distance < minDistance) {
                    minDistance = distance;
                    activeIndex = index;
                }
            });
            
            document.querySelectorAll('.snap-dot').forEach((dot, index) => {
                if (index === activeIndex) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // Settings Menu Functions
        function toggleSettingsMenu() {
            const menu = document.getElementById('settingsMenu');
            menu.classList.toggle('visible');
            updateSettingsDisplay();
        }

        function updateSettingsDisplay() {
            const soundStatus = document.getElementById('soundStatus');
            const vibrationStatus = document.getElementById('vibrationStatus');
            const themeStatus = document.getElementById('themeStatus');
            if (soundStatus) soundStatus.textContent = settings.soundsEnabled ? 'An' : 'Aus';
            if (vibrationStatus) vibrationStatus.textContent = settings.vibrationEnabled ? 'An' : 'Aus';
            if (themeStatus) themeStatus.textContent = settings.lightTheme ? 'Light' : 'Dark';
        }

        function toggleSounds() {
            settings.soundsEnabled = !settings.soundsEnabled;
            updateSettingsDisplay();
            if (settings.soundsEnabled) playSound('tap');
            toggleSettingsMenu();
        }

        function toggleVibration() {
            settings.vibrationEnabled = !settings.vibrationEnabled;
            updateSettingsDisplay();
            vibrate([50]);
            playSound('tap');
            toggleSettingsMenu();
        }

        function toggleTheme() {
            settings.lightTheme = !settings.lightTheme;
            document.body.classList.toggle('light-theme', settings.lightTheme);
            updateSettingsDisplay();
            playSound('tap');
            toggleSettingsMenu();
        }

        function showStatsModal() {
            toggleSettingsMenu();
            const totalGames = playerStats.gamesPlayed;
            const averageGameTime = playerStats.totalPlayTime > 0 ? 
                Math.round(playerStats.totalPlayTime / playerStats.gamesPlayed) + 's' : 'N/A';
            
            const content = `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                    <div style="background: rgba(44, 44, 48, 0.95); border-radius: 20px; padding: 20px; text-align: center; color: white;">
                        <div style="font-size: clamp(28px, 7vw, 36px); font-weight: 800;">${totalGames}</div>
                        <div style="font-size: clamp(12px, 3vw, 14px); opacity: 0.9; margin-top: 8px;">Spiele gespielt</div>
                    </div>
                    <div style="background: rgba(44, 44, 48, 0.95); border-radius: 20px; padding: 20px; text-align: center; color: white;">
                        <div style="font-size: clamp(28px, 7vw, 36px); font-weight: 800;">${averageGameTime}</div>
                        <div style="font-size: clamp(12px, 3vw, 14px); opacity: 0.9; margin-top: 8px;">‚åÄ Spielzeit</div>
                    </div>
                    <div style="background: rgba(44, 44, 48, 0.95); border-radius: 20px; padding: 20px; text-align: center; color: white;">
                        <div style="font-size: clamp(28px, 7vw, 36px); font-weight: 800;">${playerStats.fastestGame || 'N/A'}</div>
                        <div style="font-size: clamp(12px, 3vw, 14px); opacity: 0.9; margin-top: 8px;">Schnellstes Spiel</div>
                    </div>
                    <div style="background: rgba(44, 44, 48, 0.95); border-radius: 20px; padding: 20px; text-align: center; color: white;">
                        <div style="font-size: clamp(28px, 7vw, 36px); font-weight: 800;">${APP_VERSION}</div>
                        <div style="font-size: clamp(12px, 3vw, 14px); opacity: 0.9; margin-top: 8px;">App Version</div>
                    </div>
                </div>
            `;
            showModal('üìä Deine Statistiken', content);
        }

        function showHistoryModal() {
            toggleSettingsMenu();
            let content = '<div style="max-height: 300px; overflow-y: auto;">';
            
            if (gameHistory.length === 0) {
                content += '<p style="text-align: center; opacity: 0.7; font-size: 16px; padding: 40px 0;">Noch keine Spiele gespielt</p>';
            } else {
                const recentGames = gameHistory.slice(-10).reverse();
                recentGames.forEach((game) => {
                    const date = new Date(game.date).toLocaleDateString('de-DE');
                    const timeOfDay = new Date(game.date).toLocaleTimeString('de-DE', {hour: '2-digit', minute: '2-digit'});
                    
                    content += `
                        <div style="background: rgba(44, 44, 48, 0.95); border-radius: 20px; padding: 20px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; color: white;">
                            <div>
                                <strong style="font-size: 16px;">${game.word}</strong><br>
                                <small style="color: rgba(255,255,255,0.6); font-size: 13px;">${date} ${timeOfDay} ‚Ä¢ ${game.players} Spieler ‚Ä¢ ${game.duration}</small>
                            </div>
                            <div style="font-size: 24px;">üé≠</div>
                        </div>
                    `;
                });
            }
            
            content += '</div>';
            showModal('üìö Spiel-Historie', content);
        }

        function showAchievementsModal() {
            toggleSettingsMenu();
            let content = '<div style="max-height: 300px; overflow-y: auto;">';
            
            Object.keys(ACHIEVEMENTS).forEach(key => {
                const achievement = ACHIEVEMENTS[key];
                const unlocked = achievements[key] || false;
                content += `
                    <div style="background: rgba(44, 44, 48, 0.95); border-radius: 20px; padding: 20px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; color: white; ${unlocked ? 'border: 2px solid #4CAF50;' : ''}">
                        <div style="display: flex; align-items: center;">
                            <span style="font-size: 28px; margin-right: 16px;">${achievement.icon}</span>
                            <div>
                                <strong style="font-size: 16px;">${achievement.name}</strong><br>
                                <small style="color: rgba(255,255,255,0.6); font-size: 13px;">${achievement.description}</small>
                            </div>
                        </div>
                        <div style="font-size: 20px;">${unlocked ? '‚úÖ' : '‚ùå'}</div>
                    </div>
                `;
            });
            
            content += '</div>';
            showModal('üèÜ Erfolge', content);
        }

        function showInstallModal() {
            toggleSettingsMenu();
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);
            
            let content = `
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">üì±</div>
                    <p style="color: rgba(255,255,255,0.7); font-size: 16px; line-height: 1.5;">
                        Installiere Party Games als App auf deinem Ger√§t f√ºr die beste Erfahrung!
                    </p>
                </div>
            `;
            
            if (isIOS) {
                content += `
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 20px; margin-bottom: 16px;">
                        <h3 style="margin-bottom: 16px; color: white;">üì± iOS Installation:</h3>
                        <ol style="color: rgba(255,255,255,0.8); line-height: 1.6; padding-left: 20px;">
                            <li>Tippe auf das <strong>Teilen-Symbol</strong> üì§ in Safari</li>
                            <li>Scrolle nach unten und w√§hle <strong>"Zum Home-Bildschirm"</strong></li>
                            <li>Tippe auf <strong>"Hinzuf√ºgen"</strong> in der oberen rechten Ecke</li>
                            <li>Die App erscheint jetzt auf deinem Home-Bildschirm! üéâ</li>
                        </ol>
                    </div>
                `;
            } else if (isAndroid) {
                content += `
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 20px; margin-bottom: 16px;">
                        <h3 style="margin-bottom: 16px; color: white;">ü§ñ Android Installation:</h3>
                        <ol style="color: rgba(255,255,255,0.8); line-height: 1.6; padding-left: 20px;">
                            <li>Tippe auf das <strong>Men√º-Symbol</strong> ‚ãÆ in Chrome</li>
                            <li>W√§hle <strong>"App installieren"</strong> oder <strong>"Zum Startbildschirm hinzuf√ºgen"</strong></li>
                            <li>Best√§tige mit <strong>"Installieren"</strong></li>
                            <li>Die App ist jetzt in deinen Apps verf√ºgbar! üéâ</li>
                        </ol>
                    </div>
                `;
            } else {
                content += `
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 20px; margin-bottom: 16px;">
                        <h3 style="margin-bottom: 16px; color: white;">üíª Desktop Installation:</h3>
                        <ol style="color: rgba(255,255,255,0.8); line-height: 1.6; padding-left: 20px;">
                            <li>Klicke auf das <strong>Install-Symbol</strong> in der Adressleiste</li>
                            <li>Oder: Men√º ‚Üí <strong>"Party Games installieren"</strong></li>
                            <li>Best√§tige die Installation</li>
                            <li>Die App ist jetzt als eigenst√§ndige App verf√ºgbar! üéâ</li>
                        </ol>
                    </div>
                `;
            }
            
            showModal('üì± App installieren', content);
        }

        function showComingSoonModal() {
            toggleSettingsMenu();
            
            const content = `
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">üöÄ</div>
                    <p style="color: rgba(255,255,255,0.7); font-size: 16px; line-height: 1.5;">
                        Kommende Features f√ºr Party Games - Sei gespannt!
                    </p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 16px; margin-bottom: 12px; color: white;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                            <span style="font-size: 24px;">üéØ</span>
                            <strong style="font-size: 16px;">Neue Spiele</strong>
                        </div>
                        <div style="font-size: 14px; opacity: 0.9;">
                            ‚Ä¢ Wahrheit oder Pflicht<br>
                            ‚Ä¢ Wer bin ich?<br>
                            ‚Ä¢ Story Builder<br>
                            ‚Ä¢ Schnelles Denken
                        </div>
                    </div>
                    
                    <div style="background: #1c1c1e; border-radius: 16px; padding: 16px; margin-bottom: 12px; color: white;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                            <span style="font-size: 24px;">‚ö°</span>
                            <strong style="font-size: 16px;">Neue Features</strong>
                        </div>
                        <div style="font-size: 14px; opacity: 0.9;">
                            ‚Ä¢ Multiplayer-Modus<br>
                            ‚Ä¢ Eigene Wortlisten<br>
                            ‚Ä¢ Teams & Turniere<br>
                            ‚Ä¢ Audio-Hinweise
                        </div>
                    </div>
                </div>
            `;
            
            showModal('üöÄ Coming Soon', content);
        }

        function showInfoModal() {
            const content = `
                <div style="text-align: center; margin-bottom: 28px;">
                    <div style="font-size: 48px; margin-bottom: 16px;">üéÆ</div>
                    <p style="color: rgba(255,255,255,0.7); font-size: 16px; line-height: 1.5;">
                        Die ultimative Party-App f√ºr unvergessliche Momente mit deinen Freunden!
                    </p>
                </div>
                
                <div style="margin-bottom: 24px;">
                    <div style="background: #1c1c1e; border-radius: 20px; padding: 20px; margin-bottom: 16px; color: white;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <span style="font-size: 24px;">‚ö°</span>
                            <strong style="font-size: 17px;">Features</strong>
                        </div>
                        <div style="font-size: 15px; opacity: 0.95; line-height: 1.6;">
                            ‚Ä¢ Komplett offline spielbar<br>
                            ‚Ä¢ Responsive f√ºr alle Ger√§te<br>
                            ‚Ä¢ Keine Registrierung erforderlich<br>
                            ‚Ä¢ Kostenlos & werbefrei<br>
                            ‚Ä¢ √úber ${CATEGORY_INFO.alle.count} Impostor-W√∂rter + ${Object.keys(WER_WUERDE_QUESTIONS).length} Kategorien "Wer w√ºrde eher"
                        </div>
                    </div>
                    
                    <div style="background: #1c1c1e; border-radius: 20px; padding: 20px; color: white;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <span style="font-size: 24px;">üéØ</span>
                            <strong style="font-size: 17px;">So einfach geht's</strong>
                        </div>
                        <div style="font-size: 15px; opacity: 0.95; line-height: 1.6;">
                            1. Spiel ausw√§hlen & Einstellungen anpassen<br>
                            2. Ger√§t an alle Mitspieler weitergeben<br>
                            3. Jeder schaut sich seine Rolle an<br>
                            4. Spielen & Spa√ü haben!
                        </div>
                    </div>
                </div>
                
                <div style="background: #1c1c1e; border-radius: 16px; padding: 18px; text-align: center; border: 1px solid rgba(255,255,255,0.08);">
                    <div style="font-size: 15px; color: white; font-weight: 600;">
                        Version ${APP_VERSION}
                    </div>
                    <div style="font-size: 13px; color: rgba(255,255,255,0.6); margin-top: 4px;">
                        Regelm√§√üige Updates mit neuen Spielen
                    </div>
                </div>
            `;
            
            showModal('App Info', content);
        }

        // Modal Functions
        function showModal(title, content) {
            const modalBody = document.getElementById('modalBody');
            if (modalBody) {
                modalBody.innerHTML = `<h2 style="font-size: clamp(26px, 6.5vw, 34px); font-weight: 700; margin-bottom: 24px; text-align: center; color: white;">${title}</h2>${content}`;
                document.getElementById('modalOverlay').classList.add('visible');
            }
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('visible');
        }

        // Achievement Functions
        function checkAchievements() {
            let newAchievements = [];
            
            if (!achievements.firstGame && playerStats.gamesPlayed >= 1) {
                achievements.firstGame = true;
                newAchievements.push(ACHIEVEMENTS.firstGame);
            }
            
            if (!achievements.veteran && playerStats.gamesPlayed >= 25) {
                achievements.veteran = true;
                newAchievements.push(ACHIEVEMENTS.veteran);
            }
            
            if (!achievements.dedicated && playerStats.gamesPlayed >= 100) {
                achievements.dedicated = true;
                newAchievements.push(ACHIEVEMENTS.dedicated);
            }
            
            if (!achievements.speedRunner && playerStats.fastestGame && parseInt(playerStats.fastestGame) < 30) {
                achievements.speedRunner = true;
                newAchievements.push(ACHIEVEMENTS.speedRunner);
            }
            
            if (!achievements.marathon && playerStats.longestGame && parseInt(playerStats.longestGame) > 600) {
                achievements.marathon = true;
                newAchievements.push(ACHIEVEMENTS.marathon);
            }
            
            if (!achievements.social && gameHistory.some(game => game.players >= 10)) {
                achievements.social = true;
                newAchievements.push(ACHIEVEMENTS.social);
            }
            
            if (newAchievements.length > 0) {
                showAchievementNotification(newAchievements);
            }
        }

        function showAchievementNotification(newAchievements) {
            newAchievements.forEach((achievement, index) => {
                setTimeout(() => {
                    const notification = document.createElement('div');
                    notification.style.cssText = `
                        position: fixed;
                        top: 100px;
                        right: 20px;
                        background: #1c1c1e;
                        color: white;
                        padding: 16px 20px;
                        border-radius: 20px;
                        font-weight: 600;
                        z-index: 10000;
                        animation: slideInFromRight 0.5s ease-out;
                        max-width: 300px;
                        box-shadow: 0 16px 40px rgba(0,0,0,0.2);
                        backdrop-filter: blur(10px);
                        border: 2px solid #4CAF50;
                    `;
                    
                    notification.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <span style="font-size: 28px;">${achievement.icon}</span>
                            <div>
                                <div style="font-size: 16px; font-weight: 700;">Erfolg freigeschaltet!</div>
                                <div style="font-size: 14px; opacity: 0.8;">${achievement.name}</div>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(notification);
                    playSound('success');
                    vibrate([100, 50, 100]);
                    
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.remove();
                        }
                    }, 3000);
                }, index * 500);
            });
        }

        // Initialize
        function initialize() {
            initializePlayerNames();
            gameState.selectedCategories = ['alle'];
            werWuerdeState.selectedCategories = ['klassisch'];
            
            updateGameSettingsDisplay();
            updateWerWuerdeSettingsDisplay();
            updateSettingsDisplay();
            
            const gamesContainer = document.getElementById('gamesContainer');
            if (gamesContainer) {
                gamesContainer.addEventListener('scroll', updateCardIndicators);
                setTimeout(updateCardIndicators, 100);
            }
            
            if (settings.lightTheme) {
                document.body.classList.add('light-theme');
            }
            
            showModeSelect();
        }

        // Event Listeners f√ºr Impostor Game
        document.addEventListener('keydown', function(event) {
            if (document.getElementById('gameScreen').classList.contains('hidden')) return;
            if (event.code === 'Space' || event.key === ' ') {
                event.preventDefault();
                showRole();
            }
        });

        document.addEventListener('keyup', function(event) {
            if (document.getElementById('gameScreen').classList.contains('hidden')) return;
            if (event.code === 'Space' || event.key === ' ') {
                event.preventDefault();
                hideRole();
            }
        });

        // Event Listeners
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.settings-menu') && 
                !event.target.closest('.settings-icon') && 
                !event.target.closest('.categories-modal')) {
                const settingsMenu = document.getElementById('settingsMenu');
                if (settingsMenu) settingsMenu.classList.remove('visible');
            }
        });

        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initialize);
        } else {
            initialize();
        }
    </script>

    <!-- Modal Overlay -->
    <div id="modalOverlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 2000; opacity: 0; pointer-events: none; transition: all 0.4s ease; backdrop-filter: blur(10px);" class="modal-overlay">
        <div id="modalContent" style="background: rgba(28, 28, 30, 0.95); border-radius: 32px; padding: 32px; width: 92%; max-width: 480px; max-height: 85vh; overflow-y: auto; color: white; position: relative; backdrop-filter: blur(20px); border: 2px solid rgba(255,255,255,0.2); box-shadow: 0 32px 80px rgba(0,0,0,0.25); transform: scale(0.9) translateY(20px); transition: all 0.4s ease;">
            <button onclick="closeModal()" style="position: absolute; top: 20px; right: 24px; background: rgba(255,255,255,0.15); border: none; color: white; font-size: 28px; cursor: pointer; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.1);">√ó</button>
            <div id="modalBody"></div>
        </div>
    </div>

    <style>
        .modal-overlay.visible {
            opacity: 1 !important;
            pointer-events: auto !important;
        }
        
        .modal-overlay.visible #modalContent {
            transform: scale(1) translateY(0) !important;
        }
        
        @keyframes slideInFromRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</body>
</html>
